<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬7ç« ï¼šæŠ€æœ¯å®ç°ä¸å·¥å…·é“¾</title>
    <link rel="stylesheet" href="./assets/style.css">
    <link rel="stylesheet" href="./assets/highlight.css">
    <script src="./assets/script.js" defer></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$']],
                displayMath: [['$$', '$$']],
                processEscapes: false,
                packages: {'[+]': ['noerrors', 'ams']}
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            loader: {
                load: ['[tex]/noerrors', '[tex]/ams']
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <nav id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <h3>ç›®å½•</h3>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
            <ul class="nav-list"><li class=""><a href="./index.html">éä¼ ç»Ÿä¹¦åˆ›ä½œå®Œå…¨æŒ‡å—</a></li><li class=""><a href="./chapter1.html">ç¬¬1ç« ï¼šéä¼ ç»Ÿä¹¦çš„å®šä¹‰ä¸æ¼”åŒ–</a></li><li class=""><a href="./chapter2.html">ç¬¬2ç« ï¼šéçº¿æ€§å™äº‹æ¶æ„</a></li><li class=""><a href="./chapter3.html">ç¬¬3ç« ï¼šæ•°æ®åº“å™äº‹ä¸çŸ¥è¯†å›¾è°±</a></li><li class=""><a href="./chapter4.html">ç¬¬4ç« ï¼šè§†è§‰ä¸å¤šåª’ä½“å™äº‹</a></li><li class=""><a href="./chapter5.html">ç¬¬5ç« ï¼šæ¸¸æˆæœºåˆ¶ä¸å™äº‹èåˆ</a></li><li class=""><a href="./chapter6.html">ç¬¬6ç« ï¼šAIåä½œä¸ç”Ÿæˆå¼åˆ›ä½œ</a></li><li class="active"><a href="./chapter7.html">ç¬¬7ç« ï¼šæŠ€æœ¯å®ç°ä¸å·¥å…·é“¾</a></li><li class=""><a href="./chapter8.html">ç¬¬8ç« ï¼šå‘å¸ƒã€è¿­ä»£ä¸ç¤¾åŒº</a></li><li class=""><a href="./chapter9.html">ç¬¬9ç« ï¼šå®éªŒä¸æœªæ¥</a></li><li class=""><a href="./CLAUDE.html">Untitled</a></li></ul>
        </nav>
        
        <main class="content">
            <article>
                <h1 id="7">ç¬¬7ç« ï¼šæŠ€æœ¯å®ç°ä¸å·¥å…·é“¾</h1>
<p><em>ä»æ¦‚å¿µåˆ°äº§å“çš„æŠ€æœ¯è·¯å¾„</em></p>
<blockquote>
<p>"å¥½çš„å·¥å…·æ˜¯æ€æƒ³çš„å»¶ä¼¸ï¼Œè€Œéé™åˆ¶ã€‚" â€” Alan Kay</p>
</blockquote>
<p>å½“ä½ çš„éä¼ ç»Ÿä¹¦ç±æ¦‚å¿µå·²ç»æˆå‹ï¼Œæ¥ä¸‹æ¥æœ€å…³é”®çš„å†³å®šå°±æ˜¯ï¼šå¦‚ä½•å°†å®ƒå˜ä¸ºç°å®ï¼Ÿæœ¬ç« å°†æ·±å…¥æ¢è®¨æŠ€æœ¯å®ç°çš„æ ¸å¿ƒé—®é¢˜ï¼Œå¸®åŠ©ä½ é€‰æ‹©åˆé€‚çš„å·¥å…·é“¾ï¼Œè®¾è®¡é«˜æ•ˆçš„å·¥ä½œæµç¨‹ï¼Œå¹¶ä¼˜åŒ–æœ€ç»ˆäº§å“çš„æ€§èƒ½è¡¨ç°ã€‚</p>
<h2 id="_1">å­¦ä¹ ç›®æ ‡</h2>
<p>å®Œæˆæœ¬ç« åï¼Œä½ å°†èƒ½å¤Ÿï¼š</p>
<ul>
<li><strong>è¯„ä¼°å’Œé€‰æ‹©</strong>é€‚åˆé¡¹ç›®éœ€æ±‚çš„æŠ€æœ¯æ ˆ</li>
<li><strong>è®¾è®¡</strong>é€‚åº”éçº¿æ€§å†…å®¹ç‰¹æ€§çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥</li>
<li><strong>å®ç°</strong>å¯æ‰©å±•çš„å†…å®¹åŠ è½½å’ŒçŠ¶æ€ç®¡ç†ç³»ç»Ÿ</li>
<li><strong>ä¼˜åŒ–</strong>å¤§è§„æ¨¡éä¼ ç»Ÿä¹¦ç±çš„æ€§èƒ½è¡¨ç°</li>
<li><strong>æ„å»º</strong>ä»åŸå‹åˆ°äº§å“çš„å®Œæ•´æŠ€æœ¯æµç¨‹</li>
</ul>
<h2 id="71">7.1 æŠ€æœ¯æ ˆé€‰æ‹©ï¼šç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”</h2>
<p>é€‰æ‹©æ­£ç¡®çš„å·¥å…·å°±åƒé€‰æ‹©æ­£ç¡®çš„ç¼–ç¨‹è¯­è¨€â€”â€”æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼Œåªæœ‰æ˜¯å¦é€‚åˆã€‚è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸»æµå·¥å…·çš„ç‰¹æ€§å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h3 id="_2">æŠ€æœ¯å†³ç­–çš„ç†è®ºåŸºç¡€</h3>
<p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼ŒæŠ€æœ¯é€‰å‹å¾€å¾€æ˜¯é¡¹ç›®æˆè´¥çš„å…³é”®ã€‚å¯¹äºéä¼ ç»Ÿä¹¦ç±é¡¹ç›®ï¼Œè¿™ä¸ªå†³ç­–æ›´åŠ å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å¹³è¡¡åˆ›æ„è¡¨è¾¾ä¸æŠ€æœ¯å®ç°ã€ä½œè€…ä½“éªŒä¸è¯»è€…ä½“éªŒã€å¼€å‘æ•ˆç‡ä¸è¿è¡Œæ€§èƒ½ã€‚</p>
<p><strong>åº·å¨å®šå¾‹åœ¨å™äº‹ç³»ç»Ÿä¸­çš„ä½“ç°ï¼š</strong></p>
<p>"è®¾è®¡ç³»ç»Ÿçš„ç»„ç»‡ï¼Œå…¶äº§ç”Ÿçš„è®¾è®¡ç­‰ä»·äºç»„ç»‡çš„æ²Ÿé€šç»“æ„ã€‚" â€” Melvin Conway</p>
<p>è¿™ä¸ªå®šå¾‹åœ¨éä¼ ç»Ÿä¹¦ç±å¼€å‘ä¸­å°¤ä¸ºæ˜æ˜¾ã€‚å¦‚æœä½ çš„å›¢é˜Ÿæ˜¯ä½œå®¶ä¸»å¯¼çš„ï¼Œé‚£ä¹ˆé€‰æ‹©Twineè¿™æ ·çš„å¯è§†åŒ–å·¥å…·ä¼šæ›´è‡ªç„¶ï¼›å¦‚æœæ˜¯ç¨‹åºå‘˜ä¸»å¯¼çš„ï¼ŒInkæˆ–è‡ªå»ºæ¡†æ¶å¯èƒ½æ›´åˆé€‚ã€‚å·¥å…·çš„é€‰æ‹©ä¸ä»…å½±å“æœ€ç»ˆäº§å“ï¼Œä¹Ÿå¡‘é€ äº†å›¢é˜Ÿçš„åä½œæ–¹å¼ã€‚</p>
<p><strong>å†³ç­–ç†è®ºæ¡†æ¶ï¼š</strong></p>
<p>æˆ‘ä»¬å¯ä»¥å€Ÿé‰´å¤šå‡†åˆ™å†³ç­–åˆ†æï¼ˆMCDAï¼‰æ¥æ„å»ºå·¥å…·é€‰æ‹©æ¨¡å‹ï¼š</p>
<pre class="codehilite"><code>æ•ˆç”¨å‡½æ•° U(tool) = Î£(wi Ã— vi(tool))

å…¶ä¸­ï¼š

- wi = ç¬¬iä¸ªå‡†åˆ™çš„æƒé‡
- vi = å·¥å…·åœ¨ç¬¬iä¸ªå‡†åˆ™ä¸Šçš„å¾—åˆ†
</code></pre>

<p>å¯¹äºéä¼ ç»Ÿä¹¦ç±é¡¹ç›®ï¼Œå…¸å‹çš„å‡†åˆ™åŒ…æ‹¬ï¼š</p>
<p>| å‡†åˆ™ | æƒé‡å»ºè®® | è¯„ä¼°æ–¹æ³• |</p>
<table>
<thead>
<tr>
<th>å‡†åˆ™</th>
<th>æƒé‡å»ºè®®</th>
<th>è¯„ä¼°æ–¹æ³•</th>
</tr>
</thead>
<tbody>
<tr>
<td>åˆ›ä½œæ•ˆç‡</td>
<td>0.25</td>
<td>åŸå‹å¼€å‘æ—¶é—´</td>
</tr>
<tr>
<td>æŠ€æœ¯çµæ´»æ€§</td>
<td>0.20</td>
<td>å¯æ‰©å±•æ€§è¯„åˆ†</td>
</tr>
<tr>
<td>ç¤¾åŒºæ”¯æŒ</td>
<td>0.15</td>
<td>GitHubæ˜Ÿæ•°ã€æ´»è·ƒåº¦</td>
</tr>
<tr>
<td>æ€§èƒ½è¡¨ç°</td>
<td>0.15</td>
<td>åŸºå‡†æµ‹è¯•ç»“æœ</td>
</tr>
<tr>
<td>ç»´æŠ¤æˆæœ¬</td>
<td>0.15</td>
<td>TCOåˆ†æ</td>
</tr>
<tr>
<td>å­¦ä¹ æ›²çº¿</td>
<td>0.10</td>
<td>å›¢é˜Ÿä¸Šæ‰‹æ—¶é—´</td>
</tr>
</tbody>
</table>
<p><strong>æŠ€æœ¯å€ºåŠ¡åœ¨å™äº‹é¡¹ç›®ä¸­çš„ç§¯ç´¯ï¼š</strong></p>
<p>å™äº‹é¡¹ç›®çš„æŠ€æœ¯å€ºåŠ¡æœ‰å…¶ç‹¬ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å†…å®¹å€ºåŠ¡</strong>ï¼šå¿«é€ŸåŸå‹æ—¶åˆ›å»ºçš„ä¸´æ—¶åˆ†æ”¯å’Œå ä½æ–‡æœ¬</li>
<li><strong>ç»“æ„å€ºåŠ¡</strong>ï¼šéšæ„æ·»åŠ çš„æ•…äº‹èŠ‚ç‚¹å¯¼è‡´çš„å¤æ‚ä¾èµ–</li>
<li><strong>çŠ¶æ€å€ºåŠ¡</strong>ï¼šæœªç»è§„åˆ’çš„å˜é‡å’Œæ¡ä»¶åˆ¤æ–­</li>
<li><strong>æ€§èƒ½å€ºåŠ¡</strong>ï¼šæœªä¼˜åŒ–çš„èµ„æºåŠ è½½å’ŒçŠ¶æ€æ£€æŸ¥</li>
</ul>
<p>ç†è§£è¿™äº›å€ºåŠ¡ç±»å‹æœ‰åŠ©äºåœ¨å·¥å…·é€‰æ‹©æ—¶è€ƒè™‘é•¿æœŸç»´æŠ¤æˆæœ¬ã€‚</p>
<h3 id="_3">æ ¸å¿ƒè¯„ä¼°ç»´åº¦æ·±åº¦è§£æ</h3>
<p>åœ¨æ·±å…¥å…·ä½“å·¥å…·ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£å‡ ä¸ªæ ¸å¿ƒè¯„ä¼°ç»´åº¦ï¼š</p>
<ol>
<li><strong>å­¦ä¹ æ›²çº¿ä¸è®¤çŸ¥è´Ÿè·</strong></li>
</ol>
<p>å­¦ä¹ æ›²çº¿ä¸ä»…å…³ä¹æ—¶é—´ï¼Œæ›´å…³ä¹è®¤çŸ¥æ¨¡å‹çš„è½¬æ¢ã€‚å¯¹äºéä¼ ç»Ÿä¹¦ç±åˆ›ä½œï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li><strong>æ¦‚å¿µæ˜ å°„</strong>ï¼šå·¥å…·çš„æ¦‚å¿µæ¨¡å‹ä¸åˆ›ä½œè€…å¿ƒæ™ºæ¨¡å‹çš„åŒ¹é…åº¦</li>
<li><strong>æ¸è¿›å¼å¤æ‚æ€§</strong>ï¼šæ˜¯å¦æ”¯æŒä»ç®€å•åˆ°å¤æ‚çš„å¹³æ»‘è¿‡æ¸¡</li>
<li><strong>é”™è¯¯æ¢å¤</strong>ï¼šæ–°æ‰‹çŠ¯é”™åçš„æ¢å¤æˆæœ¬</li>
<li><strong>çŸ¥è¯†è½¬ç§»</strong>ï¼šä»å…¶ä»–å·¥å…·è¿ç§»çš„éš¾æ˜“ç¨‹åº¦</li>
</ul>
<p>ç ”ç©¶è¡¨æ˜ï¼Œå­¦ä¹ æ›²çº¿å¯ä»¥ç”¨å¹‚å¾‹æ¨¡å‹æè¿°ï¼š</p>
<pre class="codehilite"><code>T(n) = T1 Ã— n^(-b)

å…¶ä¸­ï¼š
T(n) = å®Œæˆç¬¬nä¸ªä»»åŠ¡çš„æ—¶é—´
T1 = å®Œæˆç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ—¶é—´
b = å­¦ä¹ ç‡ï¼ˆ0.2-0.4ä¸ºå…¸å‹å€¼ï¼‰
</code></pre>

<ol start="2">
<li><strong>å¯æ‰©å±•æ€§çš„å¤šç»´åº¦è€ƒé‡</strong></li>
</ol>
<p>å¯æ‰©å±•æ€§ä¸ä»…æ˜¯"èƒ½å¦å¤„ç†æ›´å¤šå†…å®¹"ï¼Œè€Œæ˜¯å¤šç»´åº¦çš„ï¼š</p>
<ul>
<li><strong>å†…å®¹è§„æ¨¡æ‰©å±•</strong>ï¼šä»100ä¸ªèŠ‚ç‚¹åˆ°10000ä¸ªèŠ‚ç‚¹</li>
<li><strong>å›¢é˜Ÿè§„æ¨¡æ‰©å±•</strong>ï¼šä»å•äººåˆ°50äººå›¢é˜Ÿ</li>
<li><strong>åŠŸèƒ½å¤æ‚åº¦æ‰©å±•</strong>ï¼šä»çº¯æ–‡æœ¬åˆ°å¤šåª’ä½“äº¤äº’</li>
<li><strong>å¹³å°æ‰©å±•</strong>ï¼šä»Webåˆ°ç§»åŠ¨ç«¯ã€VR/AR</li>
</ul>
<p>æ‰©å±•æ€§å¯ä»¥ç”¨é˜¿å§†è¾¾å°”å®šå¾‹æ¥è¯„ä¼°ï¼š</p>
<pre class="codehilite"><code>åŠ é€Ÿæ¯” S(n) = 1 / ((1-P) + P/n)

å…¶ä¸­ï¼š
P = å¯å¹¶è¡ŒåŒ–çš„éƒ¨åˆ†
n = å¤„ç†å™¨æ•°é‡ï¼ˆç±»æ¯”ä¸ºå›¢é˜Ÿè§„æ¨¡ï¼‰
</code></pre>

<ol start="3">
<li><strong>ç”Ÿæ€ç³»ç»Ÿå¥åº·åº¦æŒ‡æ ‡</strong></li>
</ol>
<p>ä¸€ä¸ªå¥åº·çš„ç”Ÿæ€ç³»ç»Ÿæ˜¯é¡¹ç›®é•¿æœŸæˆåŠŸçš„ä¿éšœã€‚è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ç¤¾åŒºæ´»è·ƒåº¦</strong>ï¼šæœˆåº¦æ´»è·ƒè´¡çŒ®è€…æ•°é‡</li>
<li><strong>æ›´æ–°é¢‘ç‡</strong>ï¼šä¸»è¦ç‰ˆæœ¬å‘å¸ƒå‘¨æœŸ</li>
<li><strong>ç¬¬ä¸‰æ–¹æ”¯æŒ</strong>ï¼šæ’ä»¶ã€å·¥å…·ã€æ•™ç¨‹çš„æ•°é‡å’Œè´¨é‡</li>
<li><strong>å•†ä¸šæ”¯æŒ</strong>ï¼šæ˜¯å¦æœ‰å…¬å¸æä¾›ä¸“ä¸šæœåŠ¡</li>
<li><strong>å‘åå…¼å®¹æ€§</strong>ï¼šå†å²é¡¹ç›®çš„å‡çº§éš¾åº¦</li>
</ul>
<ol start="4">
<li><strong>è·¨å¹³å°èƒ½åŠ›çš„æŠ€æœ¯æ ˆåˆ†æ</strong></li>
</ol>
<p>è·¨å¹³å°ä¸æ˜¯ç®€å•çš„"åˆ°å¤„èƒ½è¿è¡Œ"ï¼Œè€Œéœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li><strong>æ¸²æŸ“ä¸€è‡´æ€§</strong>ï¼šä¸åŒå¹³å°çš„è§†è§‰è¡¨ç°å·®å¼‚</li>
<li><strong>æ€§èƒ½å·®å¼‚</strong>ï¼šç§»åŠ¨ç«¯vsæ¡Œé¢ç«¯çš„æ€§èƒ½ç‰¹å¾</li>
<li><strong>è¾“å…¥æ–¹å¼</strong>ï¼šè§¦æ‘¸ã€é¼ æ ‡ã€é”®ç›˜ã€æ‰‹æŸ„çš„é€‚é…</li>
<li><strong>å¹³å°ç‰¹æ€§</strong>ï¼šæ¨é€é€šçŸ¥ã€ç¦»çº¿å­˜å‚¨ã€ç¤¾äº¤åˆ†äº«</li>
</ul>
<ol start="5">
<li><strong>æ€»æ‹¥æœ‰æˆæœ¬ï¼ˆTCOï¼‰æ¨¡å‹</strong></li>
</ol>
<pre class="codehilite"><code>TCO = åˆå§‹æˆæœ¬ + Î£(è¿è¥æˆæœ¬t Ã— æŠ˜ç°å› å­t)

å…¶ä¸­ï¼š
åˆå§‹æˆæœ¬ = è®¸å¯è´¹ + åŸ¹è®­è´¹ + è¿ç§»è´¹
è¿è¥æˆæœ¬ = ç»´æŠ¤è´¹ + æ›´æ–°è´¹ + æ‰©å±•è´¹ + æœºä¼šæˆæœ¬
</code></pre>

<p>å¯¹äºéä¼ ç»Ÿä¹¦ç±é¡¹ç›®ï¼Œéšæ€§æˆæœ¬å¾€å¾€è¢«ä½ä¼°ï¼š</p>
<ul>
<li><strong>å†…å®¹é”å®šæˆæœ¬</strong>ï¼šç‰¹å®šæ ¼å¼å¯¼è‡´çš„è¿ç§»å›°éš¾</li>
<li><strong>æŠ€èƒ½ä¾èµ–æˆæœ¬</strong>ï¼šç‰¹å®šå·¥å…·ä¸“å®¶çš„ç¨€ç¼ºæ€§</li>
<li><strong>åˆ›æ–°é™åˆ¶æˆæœ¬</strong>ï¼šå·¥å…·é™åˆ¶å¯¼è‡´çš„åˆ›æ„å¦¥å</li>
</ul>
<h3 id="_4">ç”Ÿäº§ç¯å¢ƒçš„å·¥å…·é€‰æ‹©æ¡ˆä¾‹ç ”ç©¶</h3>
<p>åœ¨æ·±å…¥å…·ä½“å·¥å…·ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹å‡ ä¸ªçœŸå®çš„ç”Ÿäº§æ¡ˆä¾‹ï¼Œäº†è§£ä¸åŒè§„æ¨¡å’Œç±»å‹çš„é¡¹ç›®æ˜¯å¦‚ä½•åšå‡ºæŠ€æœ¯é€‰æ‹©çš„ã€‚</p>
<p><strong>æ¡ˆä¾‹1ï¼šã€ŠDepression Questã€‹- ä»ä¸ªäººé¡¹ç›®åˆ°ç¤¾ä¼šç°è±¡</strong></p>
<ul>
<li><strong>åˆå§‹é€‰æ‹©</strong>ï¼šTwine 1.x</li>
<li><strong>é¡¹ç›®è§„æ¨¡</strong>ï¼šçº¦150ä¸ªæ®µè½</li>
<li><strong>å›¢é˜Ÿè§„æ¨¡</strong>ï¼š1-3äºº</li>
<li><strong>å…³é”®å†³ç­–å› ç´ </strong>ï¼šé›¶ç¼–ç¨‹é—¨æ§›ã€å¿«é€ŸåŸå‹</li>
<li><strong>ç»éªŒæ•™è®­</strong>ï¼šç®€å•å·¥å…·ä¹Ÿèƒ½åˆ›é€ æ·±åˆ»ä½“éªŒï¼Œä½†æ‰©å±•æ€§é™åˆ¶äº†åç»­å¼€å‘</li>
</ul>
<p><strong>æ¡ˆä¾‹2ï¼šã€Š80 Daysã€‹- å•†ä¸šæˆåŠŸçš„æŠ€æœ¯åŸºç¡€</strong></p>
<ul>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šink + Unity</li>
<li><strong>é¡¹ç›®è§„æ¨¡</strong>ï¼š750,000+ è¯</li>
<li><strong>å›¢é˜Ÿè§„æ¨¡</strong>ï¼š4äººæ ¸å¿ƒå›¢é˜Ÿ</li>
<li><strong>å…³é”®å†³ç­–å› ç´ </strong>ï¼šéœ€è¦å¤æ‚çŠ¶æ€ç®¡ç†ã€è·¨å¹³å°å‘å¸ƒ</li>
<li><strong>ç»éªŒæ•™è®­</strong>ï¼šInkçš„çº¯æ–‡æœ¬æ ¼å¼æå¤§æå‡äº†å†™ä½œæ•ˆç‡</li>
</ul>
<p><strong>æ¡ˆä¾‹3ï¼šã€ŠFallen Londonã€‹- æŒç»­è¿è¥çš„åœ¨çº¿ä¸–ç•Œ</strong></p>
<ul>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šè‡ªå»ºæ¡†æ¶ï¼ˆStoryNexusï¼‰</li>
<li><strong>é¡¹ç›®è§„æ¨¡</strong>ï¼šæ•°ç™¾ä¸‡è¯ï¼ŒæŒç»­æ›´æ–°</li>
<li><strong>å›¢é˜Ÿè§„æ¨¡</strong>ï¼š20+äºº</li>
<li><strong>å…³é”®å†³ç­–å› ç´ </strong>ï¼šéœ€è¦å®Œå…¨æ§åˆ¶ã€æ”¯æŒåœ¨çº¿å¤šäºº</li>
<li><strong>ç»éªŒæ•™è®­</strong>ï¼šè‡ªå»ºæ¡†æ¶æä¾›äº†æ— é™å¯èƒ½ï¼Œä½†ç»´æŠ¤æˆæœ¬å·¨å¤§</li>
</ul>
<p><strong>æ¡ˆä¾‹4ï¼šã€ŠDevice 6ã€‹- æŠ€æœ¯åˆ›æ–°é©±åŠ¨çš„å™äº‹</strong></p>
<ul>
<li><strong>æŠ€æœ¯æ ˆ</strong>ï¼šè‡ªå»ºï¼ˆObjective-C/Swiftï¼‰</li>
<li><strong>é¡¹ç›®è§„æ¨¡</strong>ï¼š6ç« èŠ‚ï¼Œé«˜åº¦å®šåˆ¶åŒ–</li>
<li><strong>å›¢é˜Ÿè§„æ¨¡</strong>ï¼š5äºº</li>
<li><strong>å…³é”®å†³ç­–å› ç´ </strong>ï¼šéœ€è¦å®Œå…¨æ§åˆ¶æ’ç‰ˆå’ŒåŠ¨ç”»</li>
<li><strong>ç»éªŒæ•™è®­</strong>ï¼šç‹¬ç‰¹ä½“éªŒéœ€è¦å®šåˆ¶æŠ€æœ¯ï¼Œä½†å¼€å‘æˆæœ¬æé«˜</li>
</ul>
<p>è¿™äº›æ¡ˆä¾‹æ­ç¤ºäº†ä¸€ä¸ªé‡è¦æ¨¡å¼ï¼š</p>
<ul>
<li><strong>å°å‹é¡¹ç›®</strong>ï¼ˆ&lt;10äººï¼‰ï¼šä¼˜å…ˆé€‰æ‹©æˆç†Ÿå·¥å…·ï¼Œå¿«é€ŸéªŒè¯æƒ³æ³•</li>
<li><strong>ä¸­å‹é¡¹ç›®</strong>ï¼ˆ10-50äººï¼‰ï¼šæ··åˆæ–¹æ¡ˆï¼Œå·¥å…·+å®šåˆ¶æ‰©å±•</li>
<li><strong>å¤§å‹é¡¹ç›®</strong>ï¼ˆ&gt;50äººï¼‰ï¼šå€¾å‘è‡ªå»ºæ¡†æ¶ï¼Œå®Œå…¨æ§åˆ¶</li>
</ul>
<h3 id="711-twine">7.1.1 Twineï¼šå¯è§†åŒ–çš„åŠ›é‡</h3>
<p><a href="https://twinery.org/">Twine</a> æ˜¯æœ€å—æ¬¢è¿çš„äº¤äº’å¼å™äº‹å·¥å…·ä¹‹ä¸€ï¼Œå®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå¯è§†åŒ–ç¼–è¾‘ã€‚ä½œä¸ºä¸€ä¸ªå·²æœ‰è¿‘åå¹´å†å²çš„æˆç†Ÿå·¥å…·ï¼ŒTwineä¸ä»…æ˜¯åˆå­¦è€…çš„å…¥é—¨é€‰æ‹©ï¼Œä¹Ÿæ˜¯è®¸å¤šä¸“ä¸šé¡¹ç›®çš„ç”Ÿäº§å·¥å…·ã€‚</p>
<p><strong>å†å²ä¸å“²å­¦ï¼š</strong></p>
<p>Twineè¯ç”Ÿäº2009å¹´ï¼Œç”±Chris Klimasåˆ›å»ºã€‚å®ƒçš„è®¾è®¡å“²å­¦åæ˜ äº†ä¸€ç§æ°‘ä¸»åŒ–å™äº‹çš„ç†å¿µâ€”â€”è®©æ²¡æœ‰ç¼–ç¨‹ç»éªŒçš„åˆ›ä½œè€…ä¹Ÿèƒ½åˆ¶ä½œäº¤äº’å¼æ•…äº‹ã€‚è¿™ç§ç†å¿µæ·±åˆ»åœ°å½±å“äº†å…¶æŠ€æœ¯æ¶æ„ï¼š</p>
<ul>
<li><strong>é›¶å®‰è£…ä½“éªŒ</strong>ï¼šå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æ¥ä½¿ç”¨</li>
<li><strong>å•æ–‡ä»¶è¾“å‡º</strong>ï¼šç”Ÿæˆçš„HTMLåŒ…å«æ‰€æœ‰å¿…éœ€èµ„æº</li>
<li><strong>æ‰€è§å³æ‰€å¾—</strong>ï¼šèŠ‚ç‚¹å›¾ç›´æ¥åæ˜ æ•…äº‹ç»“æ„</li>
</ul>
<p><strong>æ ¸å¿ƒæ¶æ„åˆ†æï¼š</strong></p>
<p>Twineçš„æ¶æ„å¯ä»¥åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<ol>
<li><strong>ç¼–è¾‘å™¨å±‚</strong>ï¼šæä¾›å¯è§†åŒ–çš„æ•…äº‹æµç¨‹å›¾ç¼–è¾‘</li>
<li><strong>æ•…äº‹æ ¼å¼å±‚</strong>ï¼šä¸åŒçš„æ¸²æŸ“å¼•æ“ï¼ˆHarloweã€SugarCubeã€Snowmanï¼‰</li>
<li><strong>è¿è¡Œæ—¶å±‚</strong>ï¼šåœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„JavaScriptä»£ç </li>
</ol>
<p>è¿™ç§åˆ†å±‚è®¾è®¡å¸¦æ¥äº†çµæ´»æ€§ï¼Œä½†ä¹Ÿéšè—äº†å¤æ‚æ€§ã€‚å½“ä½ éœ€è¦è¶…è¶ŠåŸºæœ¬åŠŸèƒ½æ—¶ï¼Œå¿…é¡»ç†è§£è¿™äº›å±‚æ¬¡ä¹‹é—´çš„äº¤äº’ã€‚</p>
<p><strong>æ¶æ„ç‰¹ç‚¹ï¼š</strong></p>
<pre class="codehilite"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Passage   â”‚â”€â”€â”€â”€â–¶â”‚   Passage   â”‚â”€â”€â”€â”€â–¶â”‚   Passage   â”‚
â”‚  &quot;å¼€å§‹&quot;     â”‚     â”‚  &quot;é€‰æ‹©A&quot;    â”‚     â”‚  &quot;ç»“å±€1&quot;    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                          â–²
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
                    â”‚   Passage   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚  &quot;é€‰æ‹©B&quot;    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<p><strong>ä¼˜åŠ¿æ·±åº¦åˆ†æï¼š</strong></p>
<ol>
<li><strong>é›¶ç¼–ç¨‹é—¨æ§›ï¼Œä½†ä¸æ˜¯é›¶å­¦ä¹ æˆæœ¬</strong></li>
</ol>
<p>Twineçš„"é›¶ç¼–ç¨‹"å¹¶ä¸æ„å‘³ç€"é›¶å­¦ä¹ "ã€‚å®é™…ä¸Šï¼ŒæŒæ¡Twineéœ€è¦ç†è§£ï¼š</p>
<ul>
<li>è¶…æ–‡æœ¬çš„åŸºæœ¬æ¦‚å¿µ</li>
<li>çŠ¶æ€ç®¡ç†çš„åŸç†</li>
<li>æ¡ä»¶é€»è¾‘çš„æ„å»º</li>
<li>CSS/JavaScriptçš„åŸºç¡€ï¼ˆè¿›é˜¶ä½¿ç”¨ï¼‰</li>
</ul>
<p>ç ”ç©¶æ˜¾ç¤ºï¼Œä¸€ä¸ªå®Œå…¨çš„æ–°æ‰‹éœ€è¦çº¦20-30å°æ—¶æ‰èƒ½ç†Ÿç»ƒæŒæ¡Twineçš„æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<ol start="2">
<li><strong>æ•…äº‹æ ¼å¼çš„æˆ˜ç•¥é€‰æ‹©</strong></li>
</ol>
<p>ä¸‰å¤§æ•…äº‹æ ¼å¼ä»£è¡¨äº†ä¸åŒçš„è®¾è®¡å“²å­¦ï¼š</p>
<ul>
<li><strong>Harlowe</strong>ï¼šé¢å‘ä½œå®¶ï¼Œç®€å•ä½†åŠŸèƒ½æœ‰é™</li>
<li><strong>SugarCube</strong>ï¼šé¢å‘æ¸¸æˆï¼Œå¤æ‚ä½†åŠŸèƒ½å¼ºå¤§</li>
<li><strong>Snowman</strong>ï¼šé¢å‘ç¨‹åºå‘˜ï¼Œçµæ´»ä½†éœ€è¦ç¼–ç¨‹</li>
</ul>
<p>é€‰æ‹©é”™è¯¯çš„æ ¼å¼å¯èƒ½å¯¼è‡´é¡¹ç›®ä¸­æœŸé‡æ„ï¼Œæˆæœ¬å·¨å¤§ã€‚</p>
<ol start="3">
<li><strong>ç¤¾åŒºç”Ÿæ€çš„çœŸå®ä»·å€¼</strong></li>
</ol>
<p>Twineç¤¾åŒºçš„ä»·å€¼ä¸ä»…åœ¨äºæŠ€æœ¯æ”¯æŒï¼š</p>
<ul>
<li><strong>æ¨¡æ¿åº“</strong>ï¼šæ•°åƒä¸ªå¯å¤ç”¨çš„æ•…äº‹æ¨¡æ¿</li>
<li><strong>æ’ä»¶ç”Ÿæ€</strong>ï¼šä»éŸ³é¢‘ç®¡ç†åˆ°å­˜æ¡£ç³»ç»Ÿ</li>
<li><strong>æ•™ç¨‹èµ„æº</strong>ï¼šè¦†ç›–ä»å…¥é—¨åˆ°é«˜çº§çš„å…¨é¢æ•™ç¨‹</li>
<li><strong>ä½œå“å±•ç¤º</strong>ï¼šæ¿€å‘åˆ›æ„çš„æˆåŠŸæ¡ˆä¾‹</li>
</ul>
<ol start="4">
<li><strong>å•æ–‡ä»¶éƒ¨ç½²çš„éšè—å¤æ‚æ€§</strong></li>
</ol>
<p>è™½ç„¶è¾“å‡ºæ˜¯å•ä¸€HTMLï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li>æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆéƒ¨åˆ†å¹³å°æœ‰ä¸Šä¼ é™åˆ¶ï¼‰</li>
<li>ç¼“å­˜ç­–ç•¥ï¼ˆå¤§æ–‡ä»¶çš„åŠ è½½é—®é¢˜ï¼‰</li>
<li>ç‰ˆæœ¬æ§åˆ¶ï¼ˆHTMLæ–‡ä»¶çš„diffä¸å‹å¥½ï¼‰</li>
<li>å®‰å…¨æ€§ï¼ˆJavaScriptä»£ç æš´éœ²ï¼‰</li>
</ul>
<p><strong>é™åˆ¶çš„æ·±å±‚åŸå› ï¼š</strong></p>
<ol>
<li><strong>å¤æ‚äº¤äº’çš„æŠ€æœ¯ç“¶é¢ˆ</strong></li>
</ol>
<p>Twineçš„å¯è§†åŒ–è®¾è®¡ä¼˜åŒ–äº†çº¿æ€§å’Œæ ‘çŠ¶ç»“æ„ï¼Œä½†å¯¹äºï¼š</p>
<ul>
<li>ç½‘çŠ¶å™äº‹ç»“æ„</li>
<li>åŠ¨æ€ç”Ÿæˆçš„å†…å®¹</li>
<li>å¤æ‚çš„çŠ¶æ€æœº</li>
<li>å®æ—¶æ•°æ®åŒæ­¥</li>
</ul>
<p>è¿™äº›åœºæ™¯ä¸‹ï¼ŒTwineçš„è¡¨ç°åŠ›ä¸ä»å¿ƒã€‚</p>
<ol start="2">
<li><strong>è§„æ¨¡åŒ–çš„ç®¡ç†éš¾é¢˜</strong></li>
</ol>
<p>å½“é¡¹ç›®è¶…è¿‡200ä¸ªèŠ‚ç‚¹æ—¶ï¼Œä¼šé‡åˆ°ï¼š</p>
<ul>
<li>å¯è§†åŒ–ç¼–è¾‘å™¨å˜å¾—æ‹¥æŒ¤</li>
<li>æŸ¥æ‰¾ç‰¹å®šèŠ‚ç‚¹å˜å¾—å›°éš¾</li>
<li>é‡æ„æˆæœ¬æ€¥å‰§ä¸Šå‡</li>
<li>å›¢é˜Ÿåä½œå†²çªé¢‘ç¹</li>
</ul>
<p>ä¸€äº›å›¢é˜Ÿçš„è§£å†³æ–¹æ¡ˆæ˜¯å°†å¤§é¡¹ç›®åˆ†å‰²æˆå¤šä¸ªå°Twineæ–‡ä»¶ï¼Œä½†è¿™å¸¦æ¥äº†æ–°çš„å¤æ‚æ€§ã€‚</p>
<ol start="3">
<li><strong>UIå®šåˆ¶çš„æŠ€æœ¯å€ºåŠ¡</strong></li>
</ol>
<p>è‡ªå®šä¹‰Twineçš„UIéœ€è¦ï¼š</p>
<ul>
<li>ç†è§£æ•…äº‹æ ¼å¼çš„å†…éƒ¨å®ç°</li>
<li>æŒæ¡CSSé¢„å¤„ç†å™¨</li>
<li>å¤„ç†æµè§ˆå™¨å…¼å®¹æ€§</li>
<li>ç®¡ç†JavaScriptä½œç”¨åŸŸ</li>
</ul>
<p>è¿™äº›è¦æ±‚å¾€å¾€è¶…å‡ºäº†éæŠ€æœ¯ä½œè€…çš„èƒ½åŠ›èŒƒå›´ã€‚</p>
<p><strong>ç”Ÿäº§çº§æœ€ä½³å®è·µï¼š</strong></p>
<ol>
<li><strong>çŠ¶æ€ç®¡ç†æ¶æ„</strong></li>
</ol>
<pre class="codehilite"><code class="language-javascript">// ä½¿ç”¨å‘½åç©ºé—´é¿å…å˜é‡æ±¡æŸ“
&lt;&lt;set $game to {
    player: {
        inventory: [],
        stats: {
            health: 100,
            karma: 0,
            gold: 20
        },
        flags: {}
    },
    world: {
        chapter: 1,
        time: &quot;morning&quot;,
        weather: &quot;clear&quot;
    },
    config: {
        difficulty: &quot;normal&quot;,
        autoSave: true
    }
}&gt;&gt;

// ä½¿ç”¨å‡½æ•°å°è£…å¤æ‚é€»è¾‘
&lt;&lt;widget &quot;purchaseItem&quot;&gt;&gt;
    &lt;&lt;set _item to $args[0]&gt;&gt;
    &lt;&lt;set _price to $args[1]&gt;&gt;

    &lt;&lt;if $game.player.stats.gold &gt;= _price&gt;&gt;
        &lt;&lt;set $game.player.stats.gold -= _price&gt;&gt;
        &lt;&lt;set $game.player.inventory.push(_item)&gt;&gt;
        &lt;&lt;set $game.player.flags[&quot;purchased_&quot; + _item] to true&gt;&gt;

        // è§¦å‘æˆå°±ç³»ç»Ÿ
        &lt;&lt;checkAchievement &quot;firstPurchase&quot;&gt;&gt;

        // è®°å½•åˆ†ææ•°æ®
        &lt;&lt;trackEvent &quot;purchase&quot; _item _price&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/widget&gt;&gt;

:: å•†åº—é«˜çº§ç¤ºä¾‹
&lt;&lt;set _shopInventory to [
    {name: &quot;å®å‰‘&quot;, price: 10, requires: null},
    {name: &quot;ç›¾ç‰Œ&quot;, price: 15, requires: null},
    {name: &quot;é­”æ³•å‰‘&quot;, price: 50, requires: &quot;questComplete&quot;}
]&gt;&gt;

&lt;div class=&quot;shop-container&quot;&gt;
    &lt;h2&gt;æ¬¢è¿å…‰ä¸´å†’é™©è€…å•†åº—&lt;/h2&gt;
    &lt;p&gt;ä½ çš„é‡‘å¸ï¼š&lt;span class=&quot;gold&quot;&gt;$game.player.stats.gold&lt;/span&gt;&lt;/p&gt;

    &lt;div class=&quot;shop-items&quot;&gt;
    &lt;&lt;for _item range _shopInventory&gt;&gt;
        &lt;&lt;if not _item.requires or $game.player.flags[_item.requires]&gt;&gt;
            &lt;div class=&quot;shop-item&quot;&gt;
                &lt;span class=&quot;item-name&quot;&gt;&lt;&lt;print _item.name&gt;&gt;&lt;/span&gt;
                &lt;span class=&quot;item-price&quot;&gt;&lt;&lt;print _item.price&gt;&gt; é‡‘&lt;/span&gt;
                &lt;&lt;if $game.player.stats.gold &gt;= _item.price&gt;&gt;
                    &lt;&lt;link &quot;è´­ä¹°&quot;&gt;&gt;
                        &lt;&lt;purchaseItem _item.name _item.price&gt;&gt;
                        &lt;&lt;goto &quot;Shop&quot;&gt;&gt;
                    &lt;&lt;/link&gt;&gt;
                &lt;&lt;else&gt;&gt;
                    &lt;span class=&quot;disabled&quot;&gt;é‡‘å¸ä¸è¶³&lt;/span&gt;
                &lt;&lt;/if&gt;&gt;
            &lt;/div&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/for&gt;&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<ol start="2">
<li><strong>æ¨¡å—åŒ–ç»„ç»‡ç­–ç•¥</strong></li>
</ol>
<pre class="codehilite"><code class="language-javascript">// StoryInit - åˆå§‹åŒ–æ‰€æœ‰ç³»ç»Ÿ
&lt;&lt;include &quot;InitializePlayer&quot;&gt;&gt;
&lt;&lt;include &quot;InitializeWorld&quot;&gt;&gt;
&lt;&lt;include &quot;InitializeAchievements&quot;&gt;&gt;
&lt;&lt;include &quot;InitializeAnalytics&quot;&gt;&gt;

// ä½¿ç”¨æ ‡ç­¾ç³»ç»Ÿç»„ç»‡å†…å®¹
:: InitializePlayer [init]
&lt;&lt;set $game.player to {
    // ... ç©å®¶æ•°æ®ç»“æ„
}&gt;&gt;

// ä½¿ç”¨ç‰¹æ®Šæ®µè½ç®¡ç†å…¨å±€é€»è¾‘
:: PassageHeader [header]
&lt;&lt;updateTimeOfDay&gt;&gt;
&lt;&lt;checkRandomEvents&gt;&gt;
&lt;&lt;autoSave&gt;&gt;

:: PassageFooter [footer]
&lt;&lt;updateUI&gt;&gt;
&lt;&lt;preloadNextPassages&gt;&gt;
</code></pre>

<ol start="3">
<li><strong>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong></li>
</ol>
<pre class="codehilite"><code class="language-javascript">// é¿å…é‡å¤è®¡ç®—
&lt;&lt;cacheaudio &quot;bgm_shop&quot; &quot;audio/shop.mp3&quot;&gt;&gt;
&lt;&lt;cacheaudio &quot;sfx_purchase&quot; &quot;audio/purchase.mp3&quot;&gt;&gt;

// ä½¿ç”¨ä¸´æ—¶å˜é‡å‡å°‘å…¨å±€æŸ¥æ‰¾
&lt;&lt;set _playerGold to $game.player.stats.gold&gt;&gt;
&lt;&lt;if _playerGold &gt;= 10&gt;&gt;
    // ä½¿ç”¨ä¸´æ—¶å˜é‡æ›´é«˜æ•ˆ
&lt;&lt;/if&gt;&gt;

// å»¶è¿ŸåŠ è½½éå…³é”®èµ„æº
&lt;&lt;timed 0.5s&gt;&gt;
    &lt;&lt;preloadImages &quot;images/chapter2/&quot;&gt;&gt;
&lt;&lt;/timed&gt;&gt;
</code></pre>

<p><strong>è¿›é˜¶æŠ€å·§ï¼šè‡ªå®šä¹‰å®</strong></p>
<pre class="codehilite"><code class="language-javascript">// åœ¨ JavaScript åŒºåŸŸå®šä¹‰è‡ªå®šä¹‰å®
Macro.add('achievement', {
    handler: function() {
        const achievement = this.args[0];
        const unlocked = State.variables.achievements || [];

        if (!unlocked.includes(achievement)) {
            unlocked.push(achievement);
            State.variables.achievements = unlocked;

            // æ˜¾ç¤ºæˆå°±å¼¹çª—
            UI.alert(`ğŸ† æˆå°±è§£é”ï¼š${achievement}`);
        }
    }
});

// åœ¨æ•…äº‹ä¸­ä½¿ç”¨
:: ç¬¬ä¸€æ¬¡æˆ˜æ–—èƒœåˆ©
ä½ å‡»è´¥äº†å“¥å¸ƒæ—ï¼
&lt;&lt;achievement &quot;åˆå‡ºèŒ…åº&quot;&gt;&gt;
</code></pre>

<p><strong>é€‚ç”¨åœºæ™¯åˆ†æï¼š</strong></p>
<ul>
<li>âœ… æ–‡å­—å†’é™©æ¸¸æˆ</li>
<li>âœ… äº’åŠ¨å°è¯´åŸå‹</li>
<li>âœ… æ•™è‚²ç±»åˆ†æ”¯æ•…äº‹</li>
<li>âš ï¸ éœ€è¦å¤æ‚UIçš„é¡¹ç›®ï¼ˆéœ€è¦å¤§é‡è‡ªå®šä¹‰ï¼‰</li>
<li>âŒ éœ€è¦3Dåœºæ™¯çš„é¡¹ç›®</li>
<li>âŒ éœ€è¦å®æ—¶å¤šäººäº’åŠ¨çš„é¡¹ç›®</li>
</ul>
<h3 id="712-ink">7.1.2 Inkï¼šç¨‹åºå‘˜çš„å™äº‹è¯­è¨€</h3>
<p><a href="https://www.inklestudios.com/ink/">Ink</a> ç”±Inkle Studioså¼€å‘ï¼Œæ˜¯ä¸€ç§ä¸“ä¸ºå™äº‹è®¾è®¡çš„æ ‡è®°è¯­è¨€ã€‚</p>
<p><strong>è¯­æ³•ç¤ºä¾‹ï¼š</strong></p>
<pre class="codehilite"><code class="language-ink">=== å’–å•¡é¦† ===
ä½ èµ°è¿›äº†ä¸€å®¶å®‰é™çš„å’–å•¡é¦†ã€‚

* [ç‚¹ä¸€æ¯æ‹¿é“] -&gt; æ‹¿é“
* [ç‚¹ä¸€æ¯ç¾å¼] -&gt; ç¾å¼
* [ä»€ä¹ˆéƒ½ä¸ç‚¹] -&gt; ç¦»å¼€

=== æ‹¿é“ ===
~ karma += 1
é¦™é†‡çš„æ‹¿é“è®©ä½ æ„Ÿåˆ°æ¸©æš–ã€‚
-&gt; ç»§ç»­æ•…äº‹

=== ç¾å¼ ===
~ karma -= 1  
è‹¦æ¶©çš„ç¾å¼è®©ä½ æ›´åŠ æ¸…é†’ã€‚
-&gt; ç»§ç»­æ•…äº‹
</code></pre>

<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>çº¯æ–‡æœ¬æ ¼å¼ï¼ŒGitå‹å¥½</li>
<li>å¼ºå¤§çš„å˜é‡å’Œå‡½æ•°ç³»ç»Ÿ</li>
<li>å¯åµŒå…¥Unityã€Unrealç­‰æ¸¸æˆå¼•æ“</li>
<li>æ”¯æŒå¤–éƒ¨å‡½æ•°è°ƒç”¨</li>
</ul>
<p><strong>é™åˆ¶ï¼š</strong></p>
<ul>
<li>éœ€è¦ç¼–ç¨‹æ€ç»´</li>
<li>UIéœ€è¦å•ç‹¬å®ç°</li>
<li>å­¦ä¹ æ›²çº¿è¾ƒé™¡</li>
</ul>
<p><strong>é«˜çº§ç‰¹æ€§ç¤ºä¾‹ï¼š</strong></p>
<pre class="codehilite"><code class="language-ink">// å˜é‡å’Œæ¡ä»¶é€»è¾‘
VAR health = 100
VAR hasKey = false
VAR visitedLibrary = 0

=== åœ°ä¸‹å®¤ ===
{health &lt; 50: ä½ è™šå¼±åœ°çˆ¬è¿›åœ°ä¸‹å®¤ã€‚|ä½ èµ°è¿›äº†é˜´æš—çš„åœ°ä¸‹å®¤ã€‚}

* [æ£€æŸ¥è§’è½] -&gt; æ£€æŸ¥è§’è½
* {hasKey} [ç”¨é’¥åŒ™å¼€é—¨] -&gt; å¯†å®¤
* [è¿”å›] -&gt; å¤§å…

=== æ£€æŸ¥è§’è½ ===
~ temp roll = RANDOM(1, 6)
{roll &gt; 4:
    ä½ æ‰¾åˆ°äº†ä¸€æŠŠç”Ÿé”ˆçš„é’¥åŒ™ï¼
    ~ hasKey = true

    - else:
    é™¤äº†ç°å°˜ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚
    ~ health -= 10
}
-&gt; åœ°ä¸‹å®¤

// å‡½æ•°å’Œéš§é“
=== function è·å–ç‰©å“æè¿°(item) ===
{ item:

    - &quot;å®å‰‘&quot;: ä¸€æŠŠé—ªé—ªå‘å…‰çš„å®å‰‘
    - &quot;è¯æ°´&quot;: æ¢å¤ç”Ÿå‘½å€¼çš„ç¥å¥‡è¯æ°´
    - else: ä¸€ä¸ªæ™®é€šçš„ç‰©å“
}

// çº¿ç¨‹å’Œå¹¶è¡Œå™äº‹
=== åŒæ—¶å‘ç”Ÿ ===
&lt;- èƒŒæ™¯éŸ³ä¹
&lt;- ç¯å¢ƒæè¿°
ä¸»çº¿å‰§æƒ…ç»§ç»­...

= èƒŒæ™¯éŸ³ä¹
~ temp music = &quot;mysterious&quot;
ä½ å¬åˆ°{music == &quot;mysterious&quot;: ç¥ç§˜çš„|æ¬¢å¿«çš„}éŸ³ä¹ã€‚
-&gt; DONE

= ç¯å¢ƒæè¿°
{æ—¶é—´ç³»ç»Ÿ():

    - &quot;æ—©æ™¨&quot;: é˜³å…‰é€è¿‡çª—æˆ·æ´’è¿›æ¥
    - &quot;å¤œæ™š&quot;: æœˆå…‰ç…§äº®äº†æˆ¿é—´
}
-&gt; DONE
</code></pre>

<p><strong>é›†æˆç¤ºä¾‹ï¼ˆUnityï¼‰ï¼š</strong></p>
<pre class="codehilite"><code class="language-csharp">using Ink.Runtime;
using UnityEngine;
using UnityEngine.UI;

public class InkManager : MonoBehaviour {
    [SerializeField] private TextAsset inkJSON;
    [SerializeField] private Text storyText;
    [SerializeField] private Transform choiceParent;
    [SerializeField] private Button choiceButtonPrefab;

    private Story story;

    void Start() {
        story = new Story(inkJSON.text);

        // ç»‘å®šå¤–éƒ¨å‡½æ•°
        story.BindExternalFunction(&quot;GetPlayerLevel&quot;, () =&gt; {
            return PlayerManager.Instance.Level;
        });

        ContinueStory();
    }

    void ContinueStory() {
        string text = &quot;&quot;;

        while(story.canContinue) {
            text += story.Continue();

            // å¤„ç†æ ‡ç­¾
            foreach(var tag in story.currentTags) {
                ProcessTag(tag);
            }
        }

        storyText.text = text;

        // åˆ›å»ºé€‰æ‹©æŒ‰é’®
        foreach(Choice choice in story.currentChoices) {
            var button = Instantiate(choiceButtonPrefab, choiceParent);
            button.GetComponentInChildren&lt;Text&gt;().text = choice.text;

            int choiceIndex = choice.index;
            button.onClick.AddListener(() =&gt; {
                story.ChooseChoiceIndex(choiceIndex);
                ClearChoices();
                ContinueStory();
            });
        }
    }

    void ProcessTag(string tag) {
        var parts = tag.Split(':');
        switch(parts[0]) {
            case &quot;music&quot;:
                AudioManager.PlayMusic(parts[1]);
                break;
            case &quot;scene&quot;:
                SceneManager.LoadScene(parts[1]);
                break;
        }
    }
}
</code></pre>

<p><strong>Ink vs Twine å¯¹æ¯”ï¼š</strong>
| ç‰¹æ€§ | Ink | Twine |</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>Ink</th>
<th>Twine</th>
</tr>
</thead>
<tbody>
<tr>
<td>å­¦ä¹ æ›²çº¿</td>
<td>é™¡å³­ï¼ˆéœ€è¦ç¼–ç¨‹æ€ç»´ï¼‰</td>
<td>å¹³ç¼“ï¼ˆå¯è§†åŒ–ï¼‰</td>
</tr>
<tr>
<td>ç‰ˆæœ¬æ§åˆ¶</td>
<td>ä¼˜ç§€ï¼ˆçº¯æ–‡æœ¬ï¼‰</td>
<td>è¾ƒå·®ï¼ˆHTML/JSONï¼‰</td>
</tr>
<tr>
<td>è°ƒè¯•èƒ½åŠ›</td>
<td>å¼ºå¤§ï¼ˆæ–­ç‚¹ã€æ—¥å¿—ï¼‰</td>
<td>æœ‰é™</td>
</tr>
<tr>
<td>æ¸¸æˆå¼•æ“é›†æˆ</td>
<td>åŸç”Ÿæ”¯æŒ</td>
<td>éœ€è¦é¢å¤–å·¥ä½œ</td>
</tr>
<tr>
<td>ç¤¾åŒºè§„æ¨¡</td>
<td>ä¸­ç­‰</td>
<td>å¤§</td>
</tr>
<tr>
<td>é€‚åˆé¡¹ç›®è§„æ¨¡</td>
<td>ä¸­å¤§å‹</td>
<td>å°ä¸­å‹</td>
</tr>
</tbody>
</table>
<h3 id="713">7.1.3 è‡ªå»ºæ¡†æ¶ï¼šå®Œå…¨æŒæ§</h3>
<p>å¯¹äºæœ‰ç‰¹æ®Šéœ€æ±‚çš„é¡¹ç›®ï¼Œè‡ªå»ºæ¡†æ¶å¯èƒ½æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<p><strong>æ¶æ„è®¾è®¡ç¤ºä¾‹ï¼š</strong></p>
<pre class="codehilite"><code class="language-typescript">// æ ¸å¿ƒå™äº‹å¼•æ“
interface StoryNode {
    id: string;
    content: string;
    choices?: Choice[];
    conditions?: Condition[];
    effects?: Effect[];
}

interface Choice {
    text: string;
    target: string;
    conditions?: Condition[];
}

class NarrativeEngine {
    private nodes: Map&lt;string, StoryNode&gt;;
    private state: GameState;
    private history: string[];

    constructor() {
        this.nodes = new Map();
        this.state = new GameState();
        this.history = [];
    }

    loadStory(storyData: StoryData) {
        // è§£æå’ŒéªŒè¯æ•…äº‹æ•°æ®
    }

    getCurrentNode(): StoryNode {
        return this.nodes.get(this.state.currentNodeId);
    }

    makeChoice(choiceIndex: number) {
        const currentNode = this.getCurrentNode();
        const choice = currentNode.choices[choiceIndex];

        // æ£€æŸ¥æ¡ä»¶
        if (this.checkConditions(choice.conditions)) {
            // åº”ç”¨æ•ˆæœ
            this.applyEffects(currentNode.effects);
            // è®°å½•å†å²
            this.history.push(this.state.currentNodeId);
            // è·³è½¬
            this.state.currentNodeId = choice.target;
        }
    }
}
</code></pre>

<p><strong>æŠ€æœ¯æ ˆç»„åˆå»ºè®®ï¼š</strong></p>
<ol>
<li>
<p><strong>Webä¼˜å…ˆæ–¹æ¡ˆï¼š</strong>
   - Frontend: React/Vue + TypeScript
   - State: MobX/Zustand
   - Styling: Emotion/Tailwind
   - Build: Vite/Webpack</p>
</li>
<li>
<p><strong>æ¸¸æˆå¼•æ“æ–¹æ¡ˆï¼š</strong>
   - Unity + Ink
   - Godot + è‡ªå®šä¹‰è„šæœ¬
   - Ren'Pyï¼ˆè§†è§‰å°è¯´ä¸“ç”¨ï¼‰</p>
</li>
<li>
<p><strong>åŸç”Ÿåº”ç”¨æ–¹æ¡ˆï¼š</strong>
   - React Native + è‡ªå»ºå¼•æ“
   - Flutter + Dart
   - Electron + WebæŠ€æœ¯æ ˆ</p>
</li>
</ol>
<h3 id="714">7.1.4 ä¸“ç”¨å·¥å…·ç”Ÿæ€</h3>
<p>é™¤äº†é€šç”¨æ¡†æ¶ï¼Œè¿˜æœ‰è®¸å¤šä¸“é—¨é¢†åŸŸçš„å·¥å…·å€¼å¾—äº†è§£ï¼š</p>
<ol>
<li><strong>Ren'Py - è§†è§‰å°è¯´ä¸“å®¶</strong></li>
</ol>
<pre class="codehilite"><code class="language-python"># Ren'Py è„šæœ¬ç¤ºä¾‹
define e = Character(&quot;è‰¾ç³&quot;, color=&quot;#c8ffc8&quot;)
define m = Character(&quot;ç©å®¶&quot;, color=&quot;#c8c8ff&quot;)

label start:
    scene bg cafe
    with fade

    show eileen happy
    e &quot;æ¬¢è¿æ¥åˆ°å’–å•¡é¦†ï¼&quot;

    menu:
        &quot;ç‚¹ä¸€æ¯æ‹¿é“&quot;:
            $ coffee = &quot;latte&quot;
            jump order_latte
        &quot;ç‚¹ä¸€æ¯ç¾å¼&quot;:
            $ coffee = &quot;americano&quot;
            jump order_americano

label order_latte:
    e &quot;æ‹¿é“æ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼&quot;
    show eileen smile
    $ affection += 1
    return
</code></pre>

<ol start="2">
<li>
<p><strong>Bitsy - åƒç´ è‰ºæœ¯å™äº‹</strong>
- ä¸“æ³¨äºç®€å•çš„åƒç´ è‰ºæœ¯æ¸¸æˆ
- å†…ç½®ç²¾çµç¼–è¾‘å™¨
- æç®€ä¸»ä¹‰è®¾è®¡å“²å­¦
- é€‚åˆè‰ºæœ¯å®éªŒå’Œæ¸¸æˆè¯—æ­Œ</p>
</li>
<li>
<p><strong>Yarn - å¯¹è¯ç³»ç»Ÿ</strong></p>
</li>
</ol>
<pre class="codehilite"><code class="language-yarn">title: Start
---
Shopkeeper: Welcome to my shop!
-&gt; Player: What do you have for sale?
    Shopkeeper: I have swords, shields, and potions.
    &lt;&lt;jump Shop&gt;&gt;
-&gt; Player: Just looking around.
    Shopkeeper: Take your time.
    &lt;&lt;jump Leave&gt;&gt;
===

title: Shop
---
&lt;&lt;if $gold &gt;= 10&gt;&gt;
    Shopkeeper: This sword costs 10 gold.
    -&gt; Buy it
        &lt;&lt;set $gold -= 10&gt;&gt;
        &lt;&lt;set $hasSword = true&gt;&gt;
    -&gt; Too expensive
&lt;&lt;else&gt;&gt;
    Shopkeeper: You don't have enough gold.
&lt;&lt;endif&gt;&gt;
===
</code></pre>

<h3 id="715">7.1.5 å·¥å…·é€‰æ‹©å†³ç­–æ¡†æ¶</h3>
<p><strong>å†³ç­–çŸ©é˜µï¼š</strong></p>
<p>| é¡¹ç›®ç‰¹å¾ | æ¨èå·¥å…· | åŸå›  |</p>
<table>
<thead>
<tr>
<th>é¡¹ç›®ç‰¹å¾</th>
<th>æ¨èå·¥å…·</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody>
<tr>
<td>çº¯æ–‡å­—åˆ†æ”¯å™äº‹</td>
<td>Twine/Ink</td>
<td>æˆç†Ÿç”Ÿæ€ï¼Œå¿«é€ŸåŸå‹</td>
</tr>
<tr>
<td>è§†è§‰å°è¯´</td>
<td>Ren'Py</td>
<td>ä¸“é—¨ä¼˜åŒ–ï¼Œå†…ç½®åŠŸèƒ½å®Œæ•´</td>
</tr>
<tr>
<td>å¯¹è¯æ ‘ç³»ç»Ÿ</td>
<td>Yarn</td>
<td>ä¸“æ³¨å¯¹è¯ï¼Œæ˜“äºé›†æˆ</td>
</tr>
<tr>
<td>å®éªŒæ€§è‰ºæœ¯é¡¹ç›®</td>
<td>Bitsy/è‡ªå»º</td>
<td>ç‹¬ç‰¹è¡¨è¾¾ï¼Œå®Œå…¨æ§åˆ¶</td>
</tr>
<tr>
<td>å¤§å‹å•†ä¸šé¡¹ç›®</td>
<td>Unity+Ink/è‡ªå»º</td>
<td>å¯æ‰©å±•æ€§ï¼ŒæŠ€æœ¯æ”¯æŒ</td>
</tr>
<tr>
<td>Webäº’åŠ¨æ–‡æ¡£</td>
<td>è‡ªå»º(React/Vue)</td>
<td>çµæ´»å®šåˆ¶ï¼Œç°ä»£ä½“éªŒ</td>
</tr>
</tbody>
</table>
<p><strong>æŠ€æœ¯è¯„ä¼°æ¸…å•ï¼š</strong></p>
<details>
<summary>ğŸ” ç‚¹å‡»å±•å¼€å®Œæ•´è¯„ä¼°æ¸…å•</summary>
<pre class="codehilite"><code class="language-markdown">## æŠ€æœ¯é€‰å‹è¯„ä¼°è¡¨

### é¡¹ç›®éœ€æ±‚

- [ ] é¢„è®¡å†…å®¹è§„æ¨¡ï¼ˆ&lt;100èŠ‚ç‚¹ / 100-1000èŠ‚ç‚¹ / &gt;1000èŠ‚ç‚¹ï¼‰
- [ ] å¤šåª’ä½“éœ€æ±‚ï¼ˆçº¯æ–‡æœ¬ / å›¾ç‰‡ / éŸ³é¢‘ / è§†é¢‘ / 3Dï¼‰
- [ ] äº¤äº’å¤æ‚åº¦ï¼ˆç®€å•é€‰æ‹© / çŠ¶æ€ç®¡ç† / å¤æ‚ç³»ç»Ÿï¼‰
- [ ] ç›®æ ‡å¹³å°ï¼ˆWeb / iOS / Android / PC / ä¸»æœºï¼‰
- [ ] å¤šè¯­è¨€æ”¯æŒéœ€æ±‚
- [ ] å®æ—¶æ›´æ–°éœ€æ±‚

### å›¢é˜Ÿèƒ½åŠ›

- [ ] ç¼–ç¨‹ç»éªŒæ°´å¹³
- [ ] ç¾æœ¯è®¾è®¡èƒ½åŠ›
- [ ] é¡¹ç›®ç®¡ç†ç»éªŒ
- [ ] å¯æŠ•å…¥æ—¶é—´

### æŠ€æœ¯é™åˆ¶

- [ ] é¢„ç®—é™åˆ¶
- [ ] æ—¶é—´é™åˆ¶
- [ ] æŠ€æœ¯æ ˆé™åˆ¶
- [ ] å¹³å°é™åˆ¶

### é•¿æœŸè€ƒè™‘

- [ ] ç»´æŠ¤è®¡åˆ’
- [ ] æ‰©å±•è®¡åˆ’
- [ ] ç¤¾åŒºæ”¯æŒ
- [ ] æŠ€æœ¯æ¼”è¿›
</code></pre>

</details>
<p><strong>å·¥å…·è¿ç§»ç­–ç•¥ï¼š</strong></p>
<p>å¦‚æœä¸­é€”éœ€è¦æ›´æ¢å·¥å…·ï¼Œè¿™é‡Œæ˜¯ä¸€äº›è¿ç§»ç­–ç•¥ï¼š</p>
<pre class="codehilite"><code class="language-javascript">// é€šç”¨æ•…äº‹æ ¼å¼è½¬æ¢å™¨
class StoryConverter {
    // Twineåˆ°Inkçš„è½¬æ¢
    twineToInk(twineData) {
        const passages = this.parseTwinePassages(twineData);
        let inkScript = &quot;&quot;;

        passages.forEach(passage =&gt; {
            inkScript += `=== ${this.sanitizeId(passage.name)} ===\n`;
            inkScript += this.convertTwineText(passage.text);
            inkScript += &quot;\n\n&quot;;
        });

        return inkScript;
    }

    // Inkåˆ°JSONçš„è½¬æ¢
    inkToJSON(inkScript) {
        const story = new InkParser(inkScript);
        return {
            nodes: story.knots.map(knot =&gt; ({
                id: knot.name,
                content: knot.content,
                choices: knot.choices.map(c =&gt; ({
                    text: c.text,
                    target: c.target
                }))
            }))
        };
    }
}
</code></pre>

<h2 id="71_1">ç»ƒä¹ é¢˜ 7.1</h2>
<h3 id="_5">åŸºç¡€é¢˜</h3>
<ol>
<li><strong>å·¥å…·ç‰¹æ€§åŒ¹é…</strong>
å°†ä¸‹åˆ—ç‰¹æ€§ä¸æœ€é€‚åˆçš„å·¥å…·åŒ¹é…ï¼š</li>
</ol>
<ul>
<li>A. éœ€è¦å¯è§†åŒ–èŠ‚ç‚¹ç¼–è¾‘</li>
<li>B. éœ€è¦ä¸Unityæ·±åº¦é›†æˆ</li>
<li>C. éœ€è¦æç®€åƒç´ é£æ ¼</li>
<li>D. éœ€è¦ä¸“ä¸šè§†è§‰å°è¯´åŠŸèƒ½</li>
</ul>
<p>é€‰é¡¹ï¼š1. Twine  2. Ink  3. Bitsy  4. Ren'Py</p>
<details>
<summary>ğŸ’¡ æç¤º</summary>
<p>è€ƒè™‘æ¯ä¸ªå·¥å…·çš„æ ¸å¿ƒè®¾è®¡ç†å¿µå’Œä¸»è¦ç”¨æˆ·ç¾¤ä½“ã€‚</p>
</details>
<details>
<summary>ğŸ“ ç­”æ¡ˆ</summary>
<p>A-1 (Twineçš„æ ¸å¿ƒç‰¹æ€§æ˜¯å¯è§†åŒ–ç¼–è¾‘)
B-2 (Inkæœ‰å®˜æ–¹Unityé›†æˆ)
C-3 (Bitsyä¸“æ³¨åƒç´ è‰ºæœ¯)
D-4 (Ren'Pyä¸ºè§†è§‰å°è¯´è®¾è®¡)</p>
</details>
<ol start="2">
<li><strong>çŠ¶æ€ç®¡ç†ä»£ç è½¬æ¢</strong>
å°†ä»¥ä¸‹Twine (SugarCube)ä»£ç è½¬æ¢ä¸ºç­‰æ•ˆçš„Inkä»£ç ï¼š</li>
</ol>
<pre class="codehilite"><code class="language-javascript">&lt;&lt;set $health to 100&gt;&gt;
&lt;&lt;set $hasWeapon to false&gt;&gt;

&lt;&lt;if $health &lt; 50&gt;&gt;
    ä½ çœ‹èµ·æ¥å¾ˆè™šå¼±ã€‚
&lt;&lt;else&gt;&gt;
    ä½ çœ‹èµ·æ¥å¾ˆå¥åº·ã€‚
&lt;&lt;/if&gt;&gt;
</code></pre>

<details>
<summary>ğŸ’¡ æç¤º</summary>
<p>Inkä½¿ç”¨VARå£°æ˜å˜é‡ï¼Œç”¨èŠ±æ‹¬å·è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚</p>
</details>
<details>
<summary>ğŸ“ ç­”æ¡ˆ</summary>
<pre class="codehilite"><code class="language-ink">VAR health = 100
VAR hasWeapon = false

{health &lt; 50:
    ä½ çœ‹èµ·æ¥å¾ˆè™šå¼±ã€‚

    - else:
    ä½ çœ‹èµ·æ¥å¾ˆå¥åº·ã€‚
}
</code></pre>

</details>
<ol start="3">
<li><strong>æŠ€æœ¯æ ˆé€‰æ‹©</strong>
ä½ çš„å›¢é˜Ÿè¦å¼€å‘ä¸€ä¸ªæ•™è‚²ç±»äº’åŠ¨æ•…äº‹ï¼Œç›®æ ‡ç”¨æˆ·æ˜¯ä¸­å­¦ç”Ÿï¼Œéœ€è¦åœ¨å­¦æ ¡ç”µè„‘ä¸Šè¿è¡Œï¼ˆå¯èƒ½æ²¡æœ‰å®‰è£…æƒé™ï¼‰ã€‚å›¢é˜Ÿæœ‰ä¸€åç¨‹åºå‘˜å’Œä¸¤åå†…å®¹åˆ›ä½œè€…ã€‚æ¨èå“ªä¸ªæŠ€æœ¯æ ˆï¼Ÿè¯´æ˜ç†ç”±ã€‚</li>
</ol>
<details>
<summary>ğŸ’¡ æç¤º</summary>
<p>è€ƒè™‘éƒ¨ç½²é™åˆ¶ã€å›¢é˜ŸæŠ€èƒ½åˆ†å¸ƒã€ç›®æ ‡å—ä¼—ã€‚</p>
</details>
<details>
<summary>ğŸ“ ç­”æ¡ˆ</summary>
<p>æ¨èTwine + å¯¼å‡ºä¸ºå•ä¸€HTMLæ–‡ä»¶ï¼š</p>
<ol>
<li>æ— éœ€å®‰è£…ï¼Œæµè§ˆå™¨å³å¯è¿è¡Œ</li>
<li>å†…å®¹åˆ›ä½œè€…å¯ä»¥ä½¿ç”¨å¯è§†åŒ–ç•Œé¢</li>
<li>ç¨‹åºå‘˜å¯ä»¥ç”¨JavaScriptæ‰©å±•åŠŸèƒ½</li>
<li>å•æ–‡ä»¶ä¾¿äºåœ¨å­¦æ ¡ç½‘ç»œåˆ†å‘</li>
</ol>
</details>
<h3 id="_6">æŒ‘æˆ˜é¢˜</h3>
<ol start="4">
<li><strong>æ¶æ„è®¾è®¡</strong>
è®¾è®¡ä¸€ä¸ªæ··åˆæ¶æ„ï¼Œç»“åˆInkçš„å™äº‹èƒ½åŠ›å’ŒReactçš„UIçµæ´»æ€§ã€‚ç”»å‡ºç³»ç»Ÿæ¶æ„å›¾ï¼Œæ ‡æ˜å„ç»„ä»¶èŒè´£å’Œæ•°æ®æµå‘ã€‚</li>
</ol>
<details>
<summary>ğŸ’¡ æç¤º</summary>
<p>è€ƒè™‘ï¼šInkè¿è¡Œæ—¶æ”¾åœ¨å“ªé‡Œï¼ŸçŠ¶æ€å¦‚ä½•åŒæ­¥ï¼ŸUIäº‹ä»¶å¦‚ä½•è§¦å‘æ•…äº‹æ¨è¿›ï¼Ÿ</p>
</details>
<details>
<summary>ğŸ“ ç­”æ¡ˆ</summary>
<p>æ¶æ„æ–¹æ¡ˆï¼š</p>
<pre class="codehilite"><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         React App                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   UIå±‚      â”‚  â”‚  çŠ¶æ€ç®¡ç†    â”‚ â”‚
â”‚  â”‚  (ç»„ä»¶)     â”‚â—„â”€â”¤  (Redux)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                 â”‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚        Inké€‚é…å™¨å±‚             â”‚ â”‚
â”‚  â”‚  - æ•…äº‹å®ä¾‹ç®¡ç†               â”‚ â”‚
â”‚  â”‚  - äº‹ä»¶è½¬æ¢                   â”‚ â”‚
â”‚  â”‚  - çŠ¶æ€åŒæ­¥                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                 â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       ink.js è¿è¡Œæ—¶            â”‚ â”‚
â”‚  â”‚    (Web Workerä¸­è¿è¡Œ)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>

<p>å…³é”®è®¾è®¡å†³ç­–ï¼š</p>
<ol>
<li>Inkè¿è¡Œæ—¶æ”¾åœ¨Web Workerä¸­ï¼Œé¿å…é˜»å¡UI</li>
<li>ä½¿ç”¨æ¶ˆæ¯ä¼ é€’è¿›è¡Œé€šä¿¡</li>
<li>Reduxç®¡ç†UIçŠ¶æ€ï¼ŒInkç®¡ç†æ•…äº‹çŠ¶æ€</li>
<li>é€‚é…å™¨å±‚è´Ÿè´£çŠ¶æ€è½¬æ¢å’Œäº‹ä»¶æ˜ å°„</li>
</ol>
</details>
<ol start="5">
<li><strong>æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</strong>
ä½ çš„Twineé¡¹ç›®å·²ç»å¢é•¿åˆ°500ä¸ªæ®µè½ï¼ŒåŠ è½½æ—¶é—´å˜å¾—å¾ˆé•¿ã€‚æå‡ºè‡³å°‘3ç§ä¼˜åŒ–æ–¹æ¡ˆï¼Œå¹¶åˆ†ææ¯ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚</li>
</ol>
<details>
<summary>ğŸ’¡ æç¤º</summary>
<p>è€ƒè™‘ï¼šä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€é¢„ç¼–è¯‘ã€ç¼“å­˜ç­–ç•¥ã€‚</p>
</details>
<details>
<summary>ğŸ“ ç­”æ¡ˆ</summary>
<p>æ–¹æ¡ˆ1ï¼šæ®µè½æ‡’åŠ è½½</p>
<ul>
<li>å®ç°ï¼šä¿®æ”¹Twineå¼•æ“ï¼ŒæŒ‰éœ€åŠ è½½æ®µè½</li>
<li>ä¼˜ç‚¹ï¼šå¤§å¹…å‡å°‘åˆå§‹åŠ è½½æ—¶é—´</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦æ·±åº¦ä¿®æ”¹å¼•æ“ï¼Œå¯èƒ½å½±å“è·³è½¬é€Ÿåº¦</li>
</ul>
<p>æ–¹æ¡ˆ2ï¼šç« èŠ‚åˆ†å‰²</p>
<ul>
<li>å®ç°ï¼šå°†æ•…äº‹åˆ†æˆå¤šä¸ªTwineæ–‡ä»¶ï¼Œç”¨iframeæˆ–åŠ¨æ€åŠ è½½</li>
<li>ä¼˜ç‚¹ï¼šç®€å•å®ç°ï¼Œå¯å¹¶è¡Œå¼€å‘</li>
<li>ç¼ºç‚¹ï¼šè·¨ç« èŠ‚çŠ¶æ€ç®¡ç†å¤æ‚</li>
</ul>
<p>æ–¹æ¡ˆ3ï¼šé¢„ç¼–è¯‘ä¼˜åŒ–</p>
<ul>
<li>å®ç°ï¼šå¼€å‘æ„å»ºå·¥å…·ï¼Œé¢„å¤„ç†å’Œå‹ç¼©æ•…äº‹æ•°æ®</li>
<li>ä¼˜ç‚¹ï¼šä¸æ”¹å˜è¿è¡Œæ—¶è¡Œä¸ºï¼Œå…¼å®¹æ€§å¥½</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–æ„å»ºæ­¥éª¤</li>
</ul>
<p>æ–¹æ¡ˆ4ï¼šæ¸è¿›å¼åŠ è½½</p>
<ul>
<li>å®ç°ï¼šå…ˆåŠ è½½æ•…äº‹éª¨æ¶ï¼Œç„¶ååŠ è½½è¯¦ç»†å†…å®¹</li>
<li>ä¼˜ç‚¹ï¼šå¿«é€Ÿé¦–å±ï¼Œç”¨æˆ·ä½“éªŒå¥½</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦å†…å®¹åˆ†å±‚è®¾è®¡</li>
</ul>
<p>æ¨èç»„åˆï¼šæ–¹æ¡ˆ3+æ–¹æ¡ˆ4ï¼Œä¿æŒå…¼å®¹æ€§çš„åŒæ—¶ä¼˜åŒ–ä½“éªŒã€‚</p>
</details>
<ol start="6">
<li><strong>å·¥å…·é›†æˆæŒ‘æˆ˜</strong>
è®¾è®¡ä¸€ä¸ªç³»ç»Ÿï¼Œå…è®¸ä½œè€…åœ¨Twineä¸­ç¼–å†™æ•…äº‹ï¼Œä½†æœ€ç»ˆéƒ¨ç½²ä¸ºInkæ ¼å¼ï¼ˆç”¨äºæ¸¸æˆå¼•æ“é›†æˆï¼‰ã€‚æè¿°å®Œæ•´çš„å·¥ä½œæµç¨‹å’ŒæŠ€æœ¯å®ç°ã€‚</li>
</ol>
<details>
<summary>ğŸ’¡ æç¤º</summary>
<p>éœ€è¦è§£æTwineæ ¼å¼ã€è½¬æ¢è¯­æ³•ã€å¤„ç†ä¸å…¼å®¹ç‰¹æ€§ã€‚</p>
</details>
<details>
<summary>ğŸ“ ç­”æ¡ˆ</summary>
<p>å·¥ä½œæµç¨‹è®¾è®¡ï¼š</p>
<ol>
<li>
<p><strong>ç¼–å†™é˜¶æ®µ</strong>
   - ä½œè€…ä½¿ç”¨Twineå¯è§†åŒ–ç¼–è¾‘
   - è‡ªå®šä¹‰Story Formaté™åˆ¶å¯ç”¨ç‰¹æ€§</p>
</li>
<li>
<p><strong>è½¬æ¢ç®¡é“</strong></p>
</li>
</ol>
<pre class="codehilite"><code class="language-javascript">class TwineToInkPipeline {
    // æ­¥éª¤1ï¼šè§£æTwine HTML
    parseTwine(html) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const passages = Array.from(
            doc.querySelectorAll('tw-passagedata')
        );
        return passages.map(p =&gt; ({
            name: p.getAttribute('name'),
            tags: p.getAttribute('tags'),
            content: p.textContent
        }));
    }

    // æ­¥éª¤2ï¼šè½¬æ¢è¯­æ³•
    convertSyntax(passage) {
        let ink = `=== ${this.sanitizeName(passage.name)} ===\n`;

        // è½¬æ¢é“¾æ¥ [[text|target]] -&gt; * [text] -&gt; target
        ink += passage.content.replace(
            /\[\[([^|]+)\|([^\]]+)\]\]/g,
            '* [$1] -&gt; $2'
        );

        // è½¬æ¢å˜é‡ &lt;&lt;set $var to val&gt;&gt; -&gt; ~ var = val
        ink = ink.replace(
            /&lt;&lt;set \$(\w+) to (.+)&gt;&gt;/g,
            '~ $1 = $2'
        );

        return ink;
    }

    // æ­¥éª¤3ï¼šå¤„ç†ä¸å…¼å®¹ç‰¹æ€§
    handleIncompatible(passages) {
        const warnings = [];
        passages.forEach(p =&gt; {
            // æ£€æµ‹JavaScriptä»£ç 
            if (p.content.includes('&lt;&lt;script&gt;&gt;')) {
                warnings.push(`æ®µè½&quot;${p.name}&quot;åŒ…å«ä¸æ”¯æŒçš„è„šæœ¬`);
            }
        });
        return warnings;
    }
}
</code></pre>

<ol start="3">
<li>
<p><strong>éªŒè¯é˜¶æ®µ</strong>
   - ç¼–è¯‘Inkæ£€æŸ¥è¯­æ³•é”™è¯¯
   - æ¨¡æ‹Ÿè¿è¡Œæµ‹è¯•æ‰€æœ‰è·¯å¾„
   - ç”Ÿæˆè½¬æ¢æŠ¥å‘Š</p>
</li>
<li>
<p><strong>éƒ¨ç½²é˜¶æ®µ</strong>
   - è¾“å‡º.inkæ–‡ä»¶
   - ç”ŸæˆUnityé›†æˆä»£ç 
   - åˆ›å»ºèµ„æºæ˜ å°„è¡¨</p>
</li>
</ol>
<p>æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>Node.jsè½¬æ¢å·¥å…·</li>
<li>Twineè‡ªå®šä¹‰æ ¼å¼</li>
<li>Inkç¼–è¯‘å™¨é›†æˆ</li>
<li>CI/CDè‡ªåŠ¨åŒ–ç®¡é“</li>
</ul>
</details>
<h2 id="72">7.2 ç‰ˆæœ¬æ§åˆ¶ï¼šç®¡ç†éçº¿æ€§çš„å¤æ‚æ€§</h2>
<p>ä¼ ç»Ÿçš„çº¿æ€§æ–‡æœ¬ç”¨Gitç®¡ç†å¾ˆç®€å•ï¼Œä½†éçº¿æ€§å†…å®¹å¸¦æ¥äº†ç‹¬ç‰¹æŒ‘æˆ˜ã€‚å½“å¤šä¸ªä½œè€…åŒæ—¶ç¼–è¾‘ç›¸äº’è¿æ¥çš„æ•…äº‹èŠ‚ç‚¹æ—¶ï¼Œå¦‚ä½•é¿å…é€»è¾‘æ–­è£‚ï¼Ÿå½“éœ€è¦æµ‹è¯•ä¸åŒçš„å™äº‹åˆ†æ”¯æ—¶ï¼Œå¦‚ä½•æœ‰æ•ˆç®¡ç†å®éªŒæ€§å†…å®¹ï¼Ÿæœ¬èŠ‚å°†æ¢è®¨è¿™äº›å®é™…é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 id="721">7.2.1 å†…å®¹ç»„ç»‡ç­–ç•¥</h3>
<ol>
<li><strong>åŸå­åŒ–å†…å®¹æ–‡ä»¶ï¼š</strong></li>
</ol>
<pre class="codehilite"><code>project/
â”œâ”€â”€ story/
â”‚   â”œâ”€â”€ chapters/
â”‚   â”‚   â”œâ”€â”€ ch01/
â”‚   â”‚   â”‚   â”œâ”€â”€ start.ink
â”‚   â”‚   â”‚   â”œâ”€â”€ branch_a.ink
â”‚   â”‚   â”‚   â””â”€â”€ branch_b.ink
â”‚   â”‚   â””â”€â”€ ch02/
â”‚   â”œâ”€â”€ characters/
â”‚   â”‚   â”œâ”€â”€ protagonist.json
â”‚   â”‚   â””â”€â”€ npc_merchant.json
â”‚   â””â”€â”€ world/
â”‚       â”œâ”€â”€ locations.json
â”‚       â””â”€â”€ items.json
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ audio/
â”‚   â””â”€â”€ fonts/
â””â”€â”€ src/
    â”œâ”€â”€ engine/
    â”œâ”€â”€ ui/
    â””â”€â”€ utils/
</code></pre>

<ol start="2">
<li><strong>å†…å®¹å¼•ç”¨ç³»ç»Ÿï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-yaml"># story/chapters/ch01/metadata.yml
chapter:
  id: ch01
  title: &quot;è§‰é†’&quot;
  entry_point: &quot;start&quot;

nodes:

  - id: &quot;start&quot;
    file: &quot;start.ink&quot;
    connects_to: [&quot;branch_a&quot;, &quot;branch_b&quot;]

  - id: &quot;branch_a&quot;
    file: &quot;branch_a.ink&quot;
    requires: [&quot;item:key_card&quot;]

dependencies:
  characters: [&quot;protagonist&quot;, &quot;npc_merchant&quot;]
  locations: [&quot;spaceship_bridge&quot;, &quot;cargo_bay&quot;]
</code></pre>

<h3 id="722">7.2.2 åˆ†æ”¯ç­–ç•¥</h3>
<p><strong>å†…å®¹åˆ†æ”¯ vs ä»£ç åˆ†æ”¯ï¼š</strong></p>
<pre class="codehilite"><code class="language-bash"># åŠŸèƒ½åˆ†æ”¯
git checkout -b feature/inventory-system

# å†…å®¹åˆ†æ”¯ï¼ˆç« èŠ‚ï¼‰
git checkout -b content/chapter-3

# å®éªŒæ€§åˆ†æ”¯è·¯çº¿
git checkout -b experiment/alternate-ending

# æœ¬åœ°åŒ–åˆ†æ”¯
git checkout -b localization/zh-cn
</code></pre>

<p><strong>åˆå¹¶ç­–ç•¥ï¼š</strong></p>
<pre class="codehilite"><code class="language-bash"># ä½¿ç”¨ --no-ff ä¿ç•™å†…å®¹å¼€å‘å†å²
git merge --no-ff content/chapter-3

# å†…å®¹å†²çªè§£å†³è„šæœ¬
#!/bin/bash
# merge-story-conflicts.sh
for file in $(git diff --name-only --diff-filter=U); do
    if [[ $file == *.ink ]]; then
        echo &quot;Resolving story conflict in $file&quot;
        # è‡ªå®šä¹‰åˆå¹¶é€»è¾‘
    fi
done
</code></pre>

<h3 id="723">7.2.3 åˆ†æ”¯å†²çªå¤„ç†</h3>
<p>éçº¿æ€§å†…å®¹çš„åˆå¹¶å†²çªä¸ä»…ä»…æ˜¯æ–‡æœ¬å†²çªï¼Œæ›´å¤šæ˜¯é€»è¾‘å†²çªã€‚</p>
<ol>
<li><strong>æ•…äº‹å›¾éªŒè¯ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-python"># story_validator.py
import networkx as nx
import json

class StoryValidator:
    def __init__(self, story_dir):
        self.graph = nx.DiGraph()
        self.load_story_structure(story_dir)

    def validate_merge(self, branch_a, branch_b):
        &quot;&quot;&quot;éªŒè¯ä¸¤ä¸ªåˆ†æ”¯åˆå¹¶åçš„æ•…äº‹å®Œæ•´æ€§&quot;&quot;&quot;
        issues = []

        # æ£€æŸ¥æ–­é“¾
        orphans = self.find_orphan_nodes()
        if orphans:
            issues.append(f&quot;å­¤ç«‹èŠ‚ç‚¹: {orphans}&quot;)

        # æ£€æŸ¥å¾ªç¯ä¾èµ–
        cycles = list(nx.simple_cycles(self.graph))
        if cycles:
            issues.append(f&quot;å¾ªç¯è·¯å¾„: {cycles}&quot;)

        # æ£€æŸ¥å¿…éœ€å˜é‡
        undefined_vars = self.check_undefined_variables()
        if undefined_vars:
            issues.append(f&quot;æœªå®šä¹‰å˜é‡: {undefined_vars}&quot;)

        return issues

    def find_orphan_nodes(self):
        &quot;&quot;&quot;æŸ¥æ‰¾æ— æ³•åˆ°è¾¾çš„èŠ‚ç‚¹&quot;&quot;&quot;
        start_nodes = [n for n in self.graph if self.graph.in_degree(n) == 0]
        reachable = set()

        for start in start_nodes:
            reachable.update(nx.descendants(self.graph, start))
            reachable.add(start)

        all_nodes = set(self.graph.nodes())
        return list(all_nodes - reachable)

    def visualize_conflicts(self, output_file=&quot;story_graph.png&quot;):
        &quot;&quot;&quot;å¯è§†åŒ–æ•…äº‹ç»“æ„å’Œå†²çª&quot;&quot;&quot;
        import matplotlib.pyplot as plt

        pos = nx.spring_layout(self.graph)

        # æ ‡è®°ä¸åŒç±»å‹çš„èŠ‚ç‚¹
        orphans = self.find_orphan_nodes()
        node_colors = ['red' if n in orphans else 'lightblue' 
                      for n in self.graph.nodes()]

        nx.draw(self.graph, pos, node_color=node_colors, 
                with_labels=True, node_size=500, font_size=8,
                arrows=True, edge_color='gray')

        plt.savefig(output_file)
        plt.close()
</code></pre>

<ol start="2">
<li><strong>æ™ºèƒ½åˆå¹¶ç­–ç•¥ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-bash">#!/bin/bash
# smart-merge.sh - æ™ºèƒ½åˆå¹¶éçº¿æ€§å†…å®¹

# è‡ªå®šä¹‰åˆå¹¶é©±åŠ¨
git config merge.ink.driver &quot;ink-merge %O %A %B %L %P&quot;
git config merge.ink.name &quot;Ink story merger&quot;

# .gitattributes
echo &quot;*.ink merge=ink&quot; &gt;&gt; .gitattributes
echo &quot;*.twee merge=twee&quot; &gt;&gt; .gitattributes
</code></pre>

<pre class="codehilite"><code class="language-javascript">// ink-merge.js - è‡ªå®šä¹‰Inkåˆå¹¶å·¥å…·
const fs = require('fs');
const inkParser = require('./ink-parser');

function mergeInkFiles(base, ours, theirs) {
    const baseStory = inkParser.parse(base);
    const ourStory = inkParser.parse(ours);
    const theirStory = inkParser.parse(theirs);

    const merged = {
        knots: {},
        variables: {},
        functions: {}
    };

    // ä¸‰æ–¹åˆå¹¶é€»è¾‘
    // 1. åˆå¹¶èŠ‚ç‚¹ï¼ˆknotsï¼‰
    const allKnots = new Set([
        ...Object.keys(baseStory.knots),
        ...Object.keys(ourStory.knots),
        ...Object.keys(theirStory.knots)
    ]);

    for (const knotName of allKnots) {
        const baseKnot = baseStory.knots[knotName];
        const ourKnot = ourStory.knots[knotName];
        const theirKnot = theirStory.knots[knotName];

        if (ourKnot &amp;&amp; theirKnot &amp;&amp; ourKnot !== theirKnot) {
            // å†²çªï¼šéœ€è¦æ‰‹åŠ¨è§£å†³
            merged.knots[knotName] = {
                conflict: true,
                ours: ourKnot,
                theirs: theirKnot
            };
        } else {
            // æ— å†²çªï¼šå–æœ€æ–°ç‰ˆæœ¬
            merged.knots[knotName] = ourKnot || theirKnot || baseKnot;
        }
    }

    // 2. åˆå¹¶å˜é‡å£°æ˜
    mergeVariables(merged.variables, 
                  baseStory.variables, 
                  ourStory.variables, 
                  theirStory.variables);

    return generateInkFile(merged);
}

function mergeVariables(target, base, ours, theirs) {
    const allVars = new Set([
        ...Object.keys(base || {}),
        ...Object.keys(ours || {}),
        ...Object.keys(theirs || {})
    ]);

    for (const varName of allVars) {
        const baseVal = base?.[varName];
        const ourVal = ours?.[varName];
        const theirVal = theirs?.[varName];

        if (ourVal !== undefined &amp;&amp; theirVal !== undefined &amp;&amp; ourVal !== theirVal) {
            console.warn(`å˜é‡å†²çª: ${varName} - æˆ‘ä»¬: ${ourVal}, ä»–ä»¬: ${theirVal}`);
            // ä½¿ç”¨æ›´ä¿å®ˆçš„å€¼
            target[varName] = typeof ourVal === 'number' &amp;&amp; typeof theirVal === 'number'
                ? Math.min(ourVal, theirVal)
                : ourVal; // é»˜è®¤ä½¿ç”¨æˆ‘ä»¬çš„ç‰ˆæœ¬
        } else {
            target[varName] = ourVal ?? theirVal ?? baseVal;
        }
    }
}
</code></pre>

<h3 id="724">7.2.4 åä½œå·¥ä½œæµ</h3>
<ol>
<li><strong>å†…å®¹é”å®šæœºåˆ¶ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-javascript">// é˜²æ­¢åŒæ—¶ç¼–è¾‘å†²çª
class ContentLock {
    async acquireLock(nodeId, userId) {
        const lockFile = `.locks/${nodeId}.lock`;

        if (await fs.exists(lockFile)) {
            const lock = await fs.readJson(lockFile);
            if (lock.userId !== userId) {
                throw new Error(`Node ${nodeId} is locked by ${lock.userId}`);
            }
        }

        await fs.writeJson(lockFile, {
            userId,
            timestamp: Date.now(),
            nodeId
        });
    }
}
</code></pre>

<ol start="2">
<li><strong>å†…å®¹å®¡æ ¸æµç¨‹ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-yaml"># .github/workflows/content-review.yml
name: Content Review
on:
  pull_request:
    paths:

      - 'story/**'

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:

      - uses: actions/checkout@v2

      - name: Validate Story Structure
        run: |
          npm run validate:story
          npm run check:links
          npm run test:narratives

      - name: Generate Preview
        run: |
          npm run build:preview
          npm run deploy:preview

      - name: Comment PR
        uses: actions/github-script@v6
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `ğŸ“– Preview available at: https://preview.example.com/pr-${context.issue.number}`
            })
</code></pre>

<h2 id="73">7.3 æ€§èƒ½ä¼˜åŒ–ï¼šè®©å¤æ‚ä¿æŒæµç•…</h2>
<p>å¤§è§„æ¨¡éçº¿æ€§å†…å®¹çš„æ€§èƒ½ä¼˜åŒ–ä¸åŒäºä¼ ç»ŸWebåº”ç”¨ï¼Œéœ€è¦ç‰¹åˆ«å…³æ³¨å†…å®¹åŠ è½½ã€çŠ¶æ€ç®¡ç†å’Œèµ„æºè°ƒåº¦ã€‚</p>
<h3 id="731">7.3.1 æ™ºèƒ½å†…å®¹åŠ è½½</h3>
<ol>
<li><strong>é¢„æµ‹æ€§é¢„åŠ è½½ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-javascript">class PredictiveLoader {
    constructor(engine) {
        this.engine = engine;
        this.loadedChunks = new Set();
        this.loadingChunks = new Map();
    }

    async predictAndLoad(currentNodeId) {
        const currentNode = this.engine.getNode(currentNodeId);
        const predictions = this.calculatePredictions(currentNode);

        // åŸºäºç”¨æˆ·å†å²å’Œå½“å‰çŠ¶æ€é¢„æµ‹å¯èƒ½è·¯å¾„
        for (const prediction of predictions) {
            if (prediction.probability &gt; 0.3) {
                this.preloadChunk(prediction.nodeId, prediction.priority);
            }
        }
    }

    calculatePredictions(node) {
        const predictions = [];

        // ç›´æ¥å¯è¾¾èŠ‚ç‚¹
        node.choices?.forEach(choice =&gt; {
            predictions.push({
                nodeId: choice.target,
                probability: 1.0 / node.choices.length,
                priority: 'high'
            });
        });

        // åŸºäºç”¨æˆ·è¡Œä¸ºæ¨¡å¼
        const userPattern = this.analyzeUserPattern();

        // åŸºäºæ•…äº‹ç»“æ„
        const structuralPredictions = this.analyzeStoryStructure(node);

        return this.mergePredictions(predictions, userPattern, structuralPredictions);
    }

    async preloadChunk(nodeId, priority = 'low') {
        if (this.loadedChunks.has(nodeId) || this.loadingChunks.has(nodeId)) {
            return;
        }

        const loadPromise = this.loadChunk(nodeId);
        this.loadingChunks.set(nodeId, loadPromise);

        if (priority === 'high') {
            await loadPromise;
        } else {
            // ä½ä¼˜å…ˆçº§ä½¿ç”¨ requestIdleCallback
            requestIdleCallback(() =&gt; loadPromise);
        }
    }
}
</code></pre>

<ol start="2">
<li><strong>åˆ†å—åŠ è½½ç­–ç•¥ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-typescript">// å†…å®¹åˆ†å—é…ç½®
interface ChunkConfig {
    id: string;
    dependencies: string[];
    size: number;
    priority: 'critical' | 'high' | 'normal' | 'low';
    cache: 'memory' | 'disk' | 'none';
}

class ChunkManager {
    private chunks: Map&lt;string, ChunkConfig&gt; = new Map();
    private loaded: Set&lt;string&gt; = new Set();
    private cache: LRUCache&lt;string, any&gt;;

    constructor(cacheSize: number = 50 * 1024 * 1024) { // 50MB
        this.cache = new LRUCache({ 
            max: cacheSize,
            length: (chunk) =&gt; chunk.size
        });
    }

    async loadChunk(chunkId: string): Promise&lt;any&gt; {
        // æ£€æŸ¥ç¼“å­˜
        if (this.cache.has(chunkId)) {
            return this.cache.get(chunkId);
        }

        const config = this.chunks.get(chunkId);

        // åŠ è½½ä¾èµ–
        await Promise.all(
            config.dependencies.map(dep =&gt; this.loadChunk(dep))
        );

        // åŠ è½½å®é™…å†…å®¹
        const content = await this.fetchChunk(chunkId);

        // æ ¹æ®ç­–ç•¥ç¼“å­˜
        if (config.cache !== 'none') {
            this.cache.set(chunkId, content);
        }

        this.loaded.add(chunkId);
        return content;
    }
}
</code></pre>

<h3 id="732">7.3.2 çŠ¶æ€ç®¡ç†ä¼˜åŒ–</h3>
<ol>
<li><strong>å¢é‡å­˜æ¡£ç³»ç»Ÿï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-javascript">class SaveSystem {
    constructor() {
        this.baseState = null;
        this.stateDeltas = [];
        this.autoSaveInterval = 30000; // 30ç§’
    }

    // ä½¿ç”¨å¢é‡ä¿å­˜å‡å°‘å­˜å‚¨å¤§å°
    save(currentState) {
        if (!this.baseState) {
            this.baseState = structuredClone(currentState);
            return this.compress(this.baseState);
        }

        const delta = this.createDelta(this.baseState, currentState);
        this.stateDeltas.push({
            timestamp: Date.now(),
            delta
        });

        // å®šæœŸåˆå¹¶deltas
        if (this.stateDeltas.length &gt; 100) {
            this.compactDeltas();
        }

        return this.compress({
            base: this.baseState,
            deltas: this.stateDeltas
        });
    }

    load(saveData) {
        const { base, deltas } = this.decompress(saveData);
        let state = structuredClone(base);

        // åº”ç”¨æ‰€æœ‰å¢é‡
        for (const { delta } of deltas) {
            state = this.applyDelta(state, delta);
        }

        return state;
    }

    createDelta(oldState, newState) {
        // ä½¿ç”¨ JSON Patch æ ¼å¼
        return jsonpatch.compare(oldState, newState);
    }
}
</code></pre>

<ol start="2">
<li><strong>çŠ¶æ€å¿«ç…§ä¸æ—¶é—´æ—…è¡Œï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-typescript">class TimeTravel {
    private snapshots: StateSnapshot[] = [];
    private maxSnapshots: number = 50;

    captureSnapshot(state: GameState, description: string) {
        const snapshot: StateSnapshot = {
            id: crypto.randomUUID(),
            timestamp: Date.now(),
            state: this.serializeState(state),
            description,
            nodeId: state.currentNodeId
        };

        this.snapshots.push(snapshot);

        // ä¿æŒå¿«ç…§æ•°é‡é™åˆ¶
        if (this.snapshots.length &gt; this.maxSnapshots) {
            // ä¿ç•™å…³é”®å¿«ç…§ï¼ˆç« èŠ‚å¼€å§‹ã€é‡è¦é€‰æ‹©ç­‰ï¼‰
            this.snapshots = this.intelligentPrune(this.snapshots);
        }
    }

    rewindTo(snapshotId: string): GameState {
        const snapshot = this.snapshots.find(s =&gt; s.id === snapshotId);
        if (!snapshot) {
            throw new Error(`Snapshot ${snapshotId} not found`);
        }

        // æ¸…ç†æ­¤åçš„å¿«ç…§
        const index = this.snapshots.indexOf(snapshot);
        this.snapshots = this.snapshots.slice(0, index + 1);

        return this.deserializeState(snapshot.state);
    }
}
</code></pre>

<h3 id="733">7.3.3 èµ„æºä¼˜åŒ–ç­–ç•¥</h3>
<ol>
<li><strong>å¤šåª’ä½“èµ„æºç®¡ç†ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-javascript">class ResourceOptimizer {
    constructor() {
        this.qualityLevels = {
            high: { image: 1.0, audio: 320, video: 1080 },
            medium: { image: 0.7, audio: 128, video: 720 },
            low: { image: 0.4, audio: 64, video: 480 }
        };
    }

    async optimizeForDevice() {
        const connection = navigator.connection;
        const memory = performance.memory;

        // åŸºäºç½‘ç»œçŠ¶å†µ
        if (connection?.effectiveType === '2g' || connection?.saveData) {
            return 'low';
        }

        // åŸºäºè®¾å¤‡å†…å­˜
        if (memory?.totalJSHeapSize &gt; 500 * 1024 * 1024) {
            return 'medium';
        }

        // åŸºäºå±å¹•åˆ†è¾¨ç‡
        const pixelRatio = window.devicePixelRatio || 1;
        if (pixelRatio &lt; 2) {
            return 'medium';
        }

        return 'high';
    }

    generateResourceURL(resource, quality) {
        const base = resource.url;
        const ext = path.extname(base);
        const name = path.basename(base, ext);

        switch (resource.type) {
            case 'image':
                return `${name}\_${quality}${ext}`;
            case 'audio':
                return `${name}\_${this.qualityLevels[quality].audio}kbps${ext}`;
            case 'video':
                return `${name}\_${this.qualityLevels[quality].video}p${ext}`;
            default:
                return base;
        }
    }
}
</code></pre>

<ol start="2">
<li><strong>æ‡’åŠ è½½ä¸è™šæ‹ŸåŒ–ï¼š</strong></li>
</ol>
<pre class="codehilite"><code class="language-typescript">// ç”¨äºé•¿åˆ—è¡¨ï¼ˆå¦‚å­˜æ¡£åˆ—è¡¨ã€æˆå°±ç³»ç»Ÿï¼‰çš„è™šæ‹Ÿæ»šåŠ¨
class VirtualScroller {
    private container: HTMLElement;
    private itemHeight: number;
    private items: any[];
    private visibleRange: { start: number; end: number };

    constructor(container: HTMLElement, items: any[], itemHeight: number) {
        this.container = container;
        this.items = items;
        this.itemHeight = itemHeight;

        this.setupVirtualScroll();
    }

    private setupVirtualScroll() {
        // åˆ›å»ºå ä½å…ƒç´ 
        const totalHeight = this.items.length * this.itemHeight;
        const spacer = document.createElement('div');
        spacer.style.height = `${totalHeight}px`;

        this.container.appendChild(spacer);

        // ç›‘å¬æ»šåŠ¨
        this.container.addEventListener('scroll', () =&gt; {
            this.updateVisibleItems();
        });

        this.updateVisibleItems();
    }

    private updateVisibleItems() {
        const scrollTop = this.container.scrollTop;
        const containerHeight = this.container.clientHeight;

        const start = Math.floor(scrollTop / this.itemHeight);
        const end = Math.ceil((scrollTop + containerHeight) / this.itemHeight);

        // æ·»åŠ ç¼“å†²åŒº
        const buffer = 5;
        this.visibleRange = {
            start: Math.max(0, start - buffer),
            end: Math.min(this.items.length, end + buffer)
        };

        this.renderVisibleItems();
    }
}
</code></pre>
            </article>
            
            <nav class="page-nav"><a href="./chapter6.html" class="nav-link prev">â† ç¬¬6ç« ï¼šAIåä½œä¸ç”Ÿæˆå¼åˆ›ä½œ</a><a href="./chapter8.html" class="nav-link next">ç¬¬8ç« ï¼šå‘å¸ƒã€è¿­ä»£ä¸ç¤¾åŒº â†’</a></nav>
        </main>
    </div>
</body>
</html>