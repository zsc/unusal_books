# ç¬¬4ç« ï¼šè§†è§‰ä¸å¤šåª’ä½“å™äº‹

*è¶…è¶Šæ–‡å­—ï¼šå›¾åƒã€å£°éŸ³ã€åŠ¨ç”»çš„å™äº‹æ½œåŠ›*

> "ä¸€å›¾èƒœåƒè¨€ï¼Œä½†åƒè¨€é“ä¸å°½ä¸€ç§æ„Ÿå—ã€‚" â€” Eiji Tsuburaya

å½“æˆ‘ä»¬è°ˆè®º"ä¹¦"çš„æ—¶å€™ï¼Œå¤§è„‘ä¸­æµ®ç°çš„å¾€å¾€æ˜¯å¯†å¯†éº»éº»çš„æ–‡å­—ã€‚ä½†åœ¨æ•°å­—æ—¶ä»£ï¼Œå™äº‹çš„è½½ä½“å·²ç»è¿œè¿œè¶…è¶Šäº†å•çº¯çš„æ–‡æœ¬ã€‚æœ¬ç« å°†æ¢ç´¢å¦‚ä½•è¿ç”¨è§†è§‰ã€å£°éŸ³ã€åŠ¨ç”»ç­‰å¤šåª’ä½“å…ƒç´ ï¼Œåˆ›é€ å‡ºæ–‡å­—æ— æ³•è¾¾åˆ°çš„æƒ…æ„Ÿæ·±åº¦å’Œæ²‰æµ¸ä½“éªŒã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

åœ¨æœ¬ç« ç»“æŸæ—¶ï¼Œä½ å°†èƒ½å¤Ÿï¼š

1. **ç†è§£è§†è§‰è¯­æ³•**ï¼šæŒæ¡è§†è§‰å°è¯´çš„åŸºæœ¬æ„æˆè¦ç´ å’Œæ¼”å‡ºæŠ€å·§
2. **è®¾è®¡æ»šåŠ¨å™äº‹**ï¼šåˆ›é€ éšæ»šåŠ¨å±•å¼€çš„æ—¶ç©ºä½“éªŒ
3. **æ•´åˆå¤šåª’ä½“**ï¼šæœ‰æœºç»“åˆå›¾åƒã€å£°éŸ³ã€åŠ¨ç”»æœåŠ¡äºå™äº‹
4. **æŠ€æœ¯å®ç°**ï¼šé€‰æ‹©åˆé€‚çš„å·¥å…·å’Œæ¡†æ¶å®ç°è§†è§‰å™äº‹
5. **ä¼˜åŒ–ä½“éªŒ**ï¼šå¹³è¡¡è§†è§‰ä¸°å¯Œæ€§ä¸åŠ è½½æ€§èƒ½

## ğŸ“Š æœ¬ç« å¯¼èˆª

```mermaid
graph LR
    A[è§†è§‰å™äº‹åŸºç¡€] --> B[è§†è§‰å°è¯´è¯­æ³•]
    A --> C[æ»šåŠ¨å™äº‹è‰ºæœ¯]
    B --> D[äº¤äº’è§†è§‰å…ƒç´ ]
    C --> D
    D --> E[éŸ³é¢‘æ•´åˆ]
    E --> F[æŠ€æœ¯å®ç°]
    F --> G[æ¡ˆä¾‹ç ”ç©¶]
    G --> H[å®è·µç»ƒä¹ ]
```

## 1. è§†è§‰å™äº‹çš„ç†è®ºåŸºç¡€

### 1.1 ä»æ–‡å­—åˆ°å›¾åƒï¼šè®¤çŸ¥çš„è½¬å˜

äººç±»å¤§è„‘å¤„ç†è§†è§‰ä¿¡æ¯çš„é€Ÿåº¦æ˜¯æ–‡å­—çš„60,000å€ã€‚è¿™ä¸ªæƒŠäººçš„æ•°å­—èƒŒåï¼Œéšè—ç€è§†è§‰å™äº‹çš„å·¨å¤§æ½œåŠ›ï¼š

- **å³æ—¶æ€§**ï¼šå›¾åƒå¯ä»¥ç¬é—´ä¼ è¾¾å¤æ‚çš„ç©ºé—´å…³ç³»å’Œæƒ…æ„Ÿæ°›å›´
- **å¤šä¹‰æ€§**ï¼šåŒä¸€å¹…å›¾åƒå¯ä»¥æ‰¿è½½å¤šé‡è§£è¯»ï¼Œå¢åŠ å™äº‹æ·±åº¦
- **æƒ…æ„Ÿç›´è¾¾**ï¼šç»•è¿‡è¯­è¨€ä¸­æ¢ï¼Œç›´æ¥è§¦å‘æƒ…æ„Ÿååº”

### 1.2 è§†è§‰å™äº‹çš„ç‹¬ç‰¹ä¼˜åŠ¿

```markdown
æ–‡å­—å™äº‹ï¼šçº¿æ€§ â†’ æŠ½è±¡ â†’ æƒ³è±¡
è§†è§‰å™äº‹ï¼šå¹¶è¡Œ â†’ å…·è±¡ â†’ ä½“éªŒ
```

**æ¡ˆä¾‹ï¼šæè¿°ä¸€ä¸ªåºŸå¼ƒçš„æˆ¿é—´**

æ–‡å­—ç‰ˆæœ¬ï¼š
> æˆ¿é—´é‡Œå¼¥æ¼«ç€éœ‰å‘³ï¼Œå¢™çº¸å‰¥è½éœ²å‡ºæ–‘é©³çš„å¢™é¢ï¼Œåœ°æ¿ä¸Šæ•£è½ç€æ³›é»„çš„ç…§ç‰‡...

è§†è§‰ç‰ˆæœ¬ï¼š
[æƒ³è±¡ä¸€ä¸ªæ˜æš—çš„æˆ¿é—´å›¾åƒï¼Œé˜³å…‰é€è¿‡ç ´ç¢çš„çª—æˆ·ï¼Œç°å°˜åœ¨å…‰æŸä¸­é£èˆ]

è§†è§‰å¯ä»¥åœ¨ç¬é—´ä¼ è¾¾æ–‡å­—éœ€è¦æ•°æ®µæ‰èƒ½æè¿°çš„æ°›å›´ã€‚

### 1.3 å¤šåª’ä½“å™äº‹çš„å±‚æ¬¡

```
Level 1: æ–‡å­— + æ’å›¾ï¼ˆä¼ ç»Ÿå›¾ä¹¦ï¼‰
Level 2: æ–‡å­— + åŠ¨æ€å›¾åƒï¼ˆæ—©æœŸç½‘é¡µï¼‰
Level 3: å›¾åƒä¸»å¯¼ + æ–‡å­—è¾…åŠ©ï¼ˆè§†è§‰å°è¯´ï¼‰
Level 4: å¤šåª’ä½“èåˆï¼ˆäº¤äº’ç”µå½±ï¼‰
Level 5: æ²‰æµ¸å¼ä½“éªŒï¼ˆVRå™äº‹ï¼‰
```

## 2. è§†è§‰å°è¯´çš„è¯­æ³•ç³»ç»Ÿ

### 2.1 æ ¸å¿ƒè¦ç´ åˆ†è§£

è§†è§‰å°è¯´ï¼ˆVisual Novelï¼‰å‘å±•å‡ºäº†ä¸€å¥—ç‹¬ç‰¹çš„è§†è§‰è¯­æ³•ï¼Œç±»ä¼¼äºç”µå½±è¯­è¨€ï¼Œä½†æ›´é€‚åˆäº¤äº’å™äº‹ï¼š

#### ç«‹ç»˜ï¼ˆCharacter Spritesï¼‰
- **è¡¨æƒ…å·®åˆ†**ï¼šåŒä¸€è§’è‰²çš„å¤šç§è¡¨æƒ…å˜åŒ–
- **æœè£…ç³»ç»Ÿ**ï¼šåæ˜ æ—¶é—´ã€åœºåˆã€è§’è‰²æˆé•¿
- **ä½ç½®ç¼–æ’**ï¼šå·¦ä¸­å³çš„ç«™ä½æš—ç¤ºå…³ç³»åŠ¨æ€

```yaml
# ç«‹ç»˜é…ç½®ç¤ºä¾‹
character:
  name: "Alice"
  sprites:
    neutral: "alice_neutral.png"
    happy: "alice_happy.png"
    sad: "alice_sad.png"
    angry: "alice_angry.png"
  positions:
    left: {x: 25%, y: 100%}
    center: {x: 50%, y: 100%}
    right: {x: 75%, y: 100%}
```

#### èƒŒæ™¯ï¼ˆBackgroundsï¼‰
- **åœºæ™¯è½¬æ¢**ï¼šé€šè¿‡èƒŒæ™¯å˜åŒ–æ¨è¿›å™äº‹
- **æ—¶é—´æµé€**ï¼šåŒä¸€åœºæ™¯çš„æ™¨æ˜å˜åŒ–
- **æ°›å›´è¥é€ **ï¼šè‰²è°ƒã€å…‰å½±ä¼ è¾¾æƒ…ç»ª

#### æ¼”å‡ºæ•ˆæœï¼ˆVisual Effectsï¼‰
- **è½¬åœº**ï¼šæ·¡å…¥æ·¡å‡ºã€ç™¾å¶çª—ã€æº¶è§£
- **éœ‡åŠ¨**ï¼šè¡¨ç°å†²å‡»ã€æƒŠè®¶
- **æ»¤é•œ**ï¼šå›å¿†ï¼ˆæ³›é»„ï¼‰ã€æ¢¦å¢ƒï¼ˆæœ¦èƒ§ï¼‰ã€ç´§å¼ ï¼ˆçº¢è‰²è°ƒï¼‰

### 2.2 è§†è§‰èŠ‚å¥ä¸æ—¶æœº

ä¼˜ç§€çš„è§†è§‰å°è¯´æ‡‚å¾—æ§åˆ¶"è§†è§‰èŠ‚å¥"ï¼š

```python
# è§†è§‰èŠ‚å¥ç¤ºä¾‹
scene morning_confession:
    bg school_rooftop day  # èƒŒæ™¯ï¼šå­¦æ ¡å¤©å°ï¼Œç™½å¤©
    with fade              # æ·¡å…¥æ•ˆæœï¼Œ1ç§’
    
    show alice neutral at left  # Aliceå‡ºç°åœ¨å·¦ä¾§
    with dissolve              # æº¶è§£æ•ˆæœï¼Œ0.5ç§’
    
    alice "æˆ‘æœ‰è¯è¦è¯´..."     # å¯¹è¯
    
    show alice happy          # åˆ‡æ¢åˆ°å¼€å¿ƒè¡¨æƒ…
    with move                # ç§»åŠ¨åŠ¨ç”»
    
    pause 0.5               # åœé¡¿ï¼Œè¥é€ æœŸå¾…
    
    show cg confession      # æ˜¾ç¤ºç‰¹æ®ŠCG
    with flash             # é—ªå…‰æ•ˆæœ
```

### 2.3 æ„å›¾åŸåˆ™

å€Ÿé‰´ç”µå½±å’Œæ¼«ç”»çš„æ„å›¾æŠ€å·§ï¼š

- **ä¸‰åˆ†æ³•åˆ™**ï¼šå°†ç”»é¢åˆ†æˆä¹å®«æ ¼ï¼Œé‡è¦å…ƒç´ æ”¾åœ¨äº¤å‰ç‚¹
- **è§†çº¿å¼•å¯¼**ï¼šåˆ©ç”¨çº¿æ¡ã€å…‰å½±å¼•å¯¼è¯»è€…è§†çº¿
- **ç•™ç™½çš„åŠ›é‡**ï¼šé€‚å½“çš„ç©ºç™½åˆ›é€ æƒ³è±¡ç©ºé—´

## 3. æ»šåŠ¨å™äº‹ï¼šçºµå‘çš„æ—¶é—´è½´

### 3.1 æ»šåŠ¨ä½œä¸ºå™äº‹æœºåˆ¶

ç½‘é¡µçš„æ»šåŠ¨ä¸ä»…æ˜¯æµè§ˆæ–¹å¼ï¼Œæ›´å¯ä»¥æˆä¸ºå™äº‹çš„æ ¸å¿ƒæœºåˆ¶ï¼š

- **æ—¶é—´éšå–»**ï¼šå‘ä¸‹æ»šåŠ¨ = æ—¶é—´æ¨è¿›
- **ç©ºé—´æ¢ç´¢**ï¼šæ»šåŠ¨æ­ç¤ºæ–°çš„ç©ºé—´å±‚æ¬¡
- **èŠ‚å¥æ§åˆ¶**ï¼šé€šè¿‡å†…å®¹å¯†åº¦æ§åˆ¶é˜…è¯»é€Ÿåº¦

### 3.2 è§†å·®æ»šåŠ¨ï¼ˆParallax Scrollingï¼‰

ä¸åŒå±‚æ¬¡ä»¥ä¸åŒé€Ÿåº¦ç§»åŠ¨ï¼Œåˆ›é€ æ·±åº¦æ„Ÿï¼š

```javascript
// ç®€å•çš„è§†å·®æ•ˆæœå®ç°
window.addEventListener('scroll', () => {
  const scrolled = window.pageYOffset;
  
  // èƒŒæ™¯å±‚ç§»åŠ¨è¾ƒæ…¢
  background.style.transform = `translateY(${scrolled * 0.5}px)`;
  
  // ä¸­æ™¯å±‚æ­£å¸¸é€Ÿåº¦
  midground.style.transform = `translateY(${scrolled * 0.8}px)`;
  
  // å‰æ™¯å±‚ç§»åŠ¨è¾ƒå¿«
  foreground.style.transform = `translateY(${scrolled * 1.2}px)`;
});
```

### 3.3 æ»šåŠ¨è§¦å‘çš„å™äº‹äº‹ä»¶

```javascript
// æ»šåŠ¨è§¦å‘å™¨ç¤ºä¾‹
const triggers = [
  {
    element: '#chapter1',
    onEnter: () => playSound('wind.mp3'),
    onLeave: () => fadeOutSound()
  },
  {
    element: '#revelation',
    onEnter: () => {
      revealText('#hidden-message');
      shakeScreen();
    }
  }
];
```

## 4. äº¤äº’è§†è§‰å…ƒç´ 

### 4.1 å“åº”å¼å›¾åƒ

å›¾åƒä¸å†æ˜¯é™æ€çš„ï¼Œè€Œæ˜¯å¯ä»¥å“åº”ç”¨æˆ·è¡Œä¸ºï¼š

- **æ‚¬åœæ•ˆæœ**ï¼šé¼ æ ‡æ‚¬åœæ˜¾ç¤ºé¢å¤–ä¿¡æ¯
- **ç‚¹å‡»äº¤äº’**ï¼šç‚¹å‡»å›¾åƒä¸åŒåŒºåŸŸè§¦å‘ä¸åŒäº‹ä»¶
- **æ‹–æ‹½æ¢ç´¢**ï¼šé€šè¿‡æ‹–æ‹½æ¢ç´¢å¤§å‹å›¾åƒ

### 4.2 åŠ¨ç”»å™äº‹

åŠ¨ç”»å¯ä»¥æ‰¿è½½å™äº‹åŠŸèƒ½ï¼š

```css
/* å‘¼å¸åŠ¨ç”»è¡¨ç°è§’è‰²ç´§å¼  */
@keyframes nervous-breathing {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.02); }
}

.character.nervous {
  animation: nervous-breathing 2s ease-in-out infinite;
}
```

### 4.3 ç”Ÿæˆå¼è§†è§‰

åˆ©ç”¨ä»£ç ç”Ÿæˆéšæœºæˆ–å“åº”å¼çš„è§†è§‰æ•ˆæœï¼š

```javascript
// æƒ…ç»ªç²’å­ç³»ç»Ÿ
class EmotionParticles {
  constructor(emotion) {
    this.particles = [];
    this.emotion = emotion;
    this.colors = {
      joy: ['#FFD700', '#FFA500'],
      sadness: ['#4169E1', '#6495ED'],
      anger: ['#DC143C', '#FF6347']
    };
  }
  
  emit() {
    // æ ¹æ®æƒ…ç»ªç”Ÿæˆä¸åŒçš„ç²’å­æ•ˆæœ
  }
}
```

## 5. éŸ³é¢‘è®¾è®¡ä¸æ•´åˆ

### 5.1 éŸ³é¢‘çš„å™äº‹åŠŸèƒ½

å£°éŸ³åœ¨å¤šåª’ä½“å™äº‹ä¸­æ‰®æ¼”å¤šé‡è§’è‰²ï¼š

- **ç¯å¢ƒéŸ³**ï¼šå»ºç«‹åœºæ™¯æ°›å›´
- **éŸ³æ•ˆ**ï¼šå¼ºè°ƒåŠ¨ä½œå’Œè½¬æ¢
- **é…ä¹**ï¼šå¼•å¯¼æƒ…ç»ªèµ·ä¼
- **è¯­éŸ³**ï¼šè§’è‰²é…éŸ³å¢åŠ äº²å¯†æ„Ÿ

### 5.2 éŸ³é¢‘çš„ç©ºé—´è®¾è®¡

```javascript
// 3DéŸ³é¢‘å®šä½
const audioContext = new AudioContext();
const panner = audioContext.createPanner();

// è®¾ç½®å£°æºä½ç½®
panner.setPosition(x, y, z);

// å£°éŸ³éšè§’è‰²ç§»åŠ¨
character.on('move', (position) => {
  panner.setPosition(position.x, position.y, 0);
});
```

### 5.3 åŠ¨æ€éŸ³ä¹ç³»ç»Ÿ

éŸ³ä¹éšå™äº‹è¿›å±•åŠ¨æ€å˜åŒ–ï¼š

```javascript
// åˆ†å±‚éŸ³ä¹ç³»ç»Ÿ
class DynamicMusic {
  constructor() {
    this.layers = {
      base: 'music/base.ogg',
      tension: 'music/tension.ogg',
      action: 'music/action.ogg',
      emotion: 'music/emotion.ogg'
    };
  }
  
  updateMood(mood) {
    // æ ¹æ®å™äº‹æƒ…ç»ªæ·¡å…¥æ·¡å‡ºä¸åŒéŸ³è½¨
    switch(mood) {
      case 'tense':
        this.fadeIn('tension');
        break;
      case 'battle':
        this.fadeIn('action');
        this.fadeIn('tension');
        break;
    }
  }
}
```

## 6. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 6.1 å·¥å…·é“¾é€‰æ‹©

æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æŠ€æœ¯æ ˆï¼š

#### è½»é‡çº§æ–¹æ¡ˆ
- **Twine + CSSåŠ¨ç”»**ï¼šé€‚åˆç®€å•çš„è§†è§‰æ•ˆæœ
- **Markdown + reveal.js**ï¼šé€‚åˆæ¼”ç¤ºå‹å™äº‹
- **HTML + CSS + vanilla JS**ï¼šå®Œå…¨æ§åˆ¶ï¼Œé€‚åˆå®šåˆ¶

#### è§†è§‰å°è¯´å¼•æ“
- **Ren'Py**ï¼šPythonåŸºç¡€ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œç¤¾åŒºæ´»è·ƒ
- **Novel.js**ï¼šWebåŸç”Ÿï¼Œæ˜“äºéƒ¨ç½²
- **Fungus (Unity)**ï¼šé€‚åˆ3Dè§†è§‰å°è¯´

#### é«˜çº§æ¡†æ¶
- **React + Framer Motion**ï¼šç»„ä»¶åŒ–å¼€å‘ï¼Œä¸°å¯ŒåŠ¨ç”»
- **Vue + GSAP**ï¼šå“åº”å¼è®¾è®¡ï¼Œä¸“ä¸šåŠ¨ç”»åº“
- **Three.js**ï¼š3Dåœºæ™¯å’Œæ•ˆæœ

### 6.2 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

è§†è§‰ä¸°å¯Œçš„å™äº‹é¢ä¸´æ€§èƒ½æŒ‘æˆ˜ï¼š

```javascript
// å›¾ç‰‡æ‡’åŠ è½½
const lazyImages = document.querySelectorAll('img[data-src]');
const imageObserver = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      imageObserver.unobserve(img);
    }
  });
});

// èµ„æºé¢„åŠ è½½ç­–ç•¥
class ResourceManager {
  constructor() {
    this.cache = new Map();
    this.loadingQueue = [];
  }
  
  preloadChapter(chapterId) {
    const resources = this.getChapterResources(chapterId);
    resources.forEach(resource => {
      this.loadInBackground(resource);
    });
  }
}
```

### 6.3 å“åº”å¼è®¾è®¡è€ƒè™‘

å¤šè®¾å¤‡é€‚é…çš„è§†è§‰å™äº‹ï¼š

```css
/* å“åº”å¼ç«‹ç»˜ç³»ç»Ÿ */
.character-sprite {
  width: 30%;
  max-width: 400px;
  height: auto;
}

@media (max-width: 768px) {
  .character-sprite {
    width: 40%;
  }
  
  /* ç§»åŠ¨ç«¯ç®€åŒ–è§†å·®æ•ˆæœ */
  .parallax-layer {
    transform: none !important;
  }
}

/* è§¦æ‘¸ä¼˜åŒ– */
.interactive-element {
  min-height: 44px; /* æœ€å°è§¦æ‘¸ç›®æ ‡ */
  cursor: pointer;
}
```

## 7. æ¡ˆä¾‹æ·±åº¦åˆ†æ

### 7.1 ã€Š17776ã€‹ï¼šä½“è‚²çš„æœªæ¥æ˜¯ä»€ä¹ˆï¼Ÿ

Jon Boisçš„ã€Š17776ã€‹revolutionizedç½‘ç»œå™äº‹ï¼š

**åˆ›æ–°ç‚¹ï¼š**
- **æ»šåŠ¨å³æ—¶é—´**ï¼š17000å¹´çš„æ—¶é—´è·¨åº¦é€šè¿‡æ»šåŠ¨ä½“ç°
- **å¤šåª’ä½“æ··æ­**ï¼šGIFã€è§†é¢‘ã€äº’åŠ¨åœ°å›¾ã€èŠå¤©ç•Œé¢
- **æ‰“ç ´å¸¸è§„**ï¼šæ•…æ„çš„æ’ç‰ˆ"é”™è¯¯"è¥é€ æœªæ¥æ„Ÿ

**æŠ€æœ¯åˆ†æï¼š**
```html
<!-- 17776é£æ ¼çš„æ—¶é—´è·³è·ƒ -->
<div class="time-jump">
  <div class="year" data-year="2017">ç°åœ¨</div>
  <div class="spacer" style="height: 2000vh;"></div>
  <div class="year" data-year="17776">æœªæ¥</div>
</div>

<script>
// æ»šåŠ¨è¿‡ç¨‹ä¸­å¹´ä»½é€’å¢
window.addEventListener('scroll', () => {
  const progress = window.scrollY / (document.body.scrollHeight - window.innerHeight);
  const year = Math.floor(2017 + progress * 15759);
  document.querySelector('.year-counter').textContent = year;
});
</script>
```

**å™äº‹æ•ˆæœï¼š**
- ç‰©ç†ä¸Šçš„æ»šåŠ¨è·ç¦» = æ—¶é—´çš„æµé€
- çªç„¶å‡ºç°çš„åª’ä½“å…ƒç´  = æ„è¯†çš„è§‰é†’
- ç•Œé¢æ•…éšœ = ç°å®çš„ä¸ç¨³å®š

### 7.2 ã€ŠæœèŠ±å¤•èª“ã€‹ï¼ˆä»®ï¼‰ï¼šæ—¶é—´çš„è§†è§‰åŒ–

è¿™ä¸ªè™šæ„çš„è§†è§‰å°è¯´å±•ç¤ºäº†æ—¶é—´æµé€çš„ç‹¬ç‰¹è¡¨ç°ï¼š

**è§†è§‰è¯­è¨€ï¼š**
- **èŠ±ç“£ç³»ç»Ÿ**ï¼šä¸åŒæ—¶æœŸç”¨ä¸åŒèŠ±ç“£å¯†åº¦è¡¨ç°
- **è‰²å½©æ¸å˜**ï¼šä»é²œè‰³åˆ°è¤ªè‰²æš—ç¤ºè®°å¿†æ¶ˆé€
- **å±‚æ¬¡å åŠ **ï¼šæ–°æ—§å›¾åƒåŠé€æ˜å åŠ 

```javascript
// æ—¶é—´æµé€çš„è§†è§‰æ•ˆæœ
class TimeFlowEffect {
  constructor(containerEl) {
    this.container = containerEl;
    this.petals = [];
    this.timeline = 0;
  }
  
  advance(years) {
    // èŠ±ç“£å¯†åº¦éšæ—¶é—´å‡å°‘
    const density = Math.max(0, 100 - years * 2);
    
    // è‰²å½©é¥±å’Œåº¦é™ä½
    this.container.style.filter = `saturate(${100 - years}%)`;
    
    // æ·»åŠ å²æœˆç—•è¿¹
    this.addAgeLayer(years);
  }
  
  addAgeLayer(years) {
    const layer = document.createElement('div');
    layer.className = 'age-layer';
    layer.style.opacity = years * 0.01;
    this.container.appendChild(layer);
  }
}
```

### 7.3 ã€ŠHer Storyã€‹ï¼šç¢ç‰‡åŒ–çš„è§†è§‰å™äº‹

è™½ç„¶ä¸»è¦æ˜¯è§†é¢‘ï¼Œä½†å…¶ç•Œé¢è®¾è®¡å……æ»¡å™äº‹æ€§ï¼š

**ç•Œé¢å³å™äº‹ï¼š**
- **CRTæ•ˆæœ**ï¼šè¥é€ 90å¹´ä»£æ°›å›´
- **æ•°æ®åº“ç•Œé¢**ï¼šå¼ºåŒ–è°ƒæŸ¥æ„Ÿ
- **è§†é¢‘ç¼©ç•¥å›¾**ï¼šè§†è§‰çº¿ç´¢ç³»ç»Ÿ

```css
/* CRTæ˜¾ç¤ºå™¨æ•ˆæœ */
.crt-screen {
  background: radial-gradient(ellipse at center, #045f04 0%, #001800 100%);
  position: relative;
  overflow: hidden;
}

.crt-screen::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    rgba(0, 0, 0, 0.15),
    rgba(0, 0, 0, 0.15) 1px,
    transparent 1px,
    transparent 2px
  );
  pointer-events: none;
}

/* é—ªçƒæ•ˆæœ */
@keyframes flicker {
  0% { opacity: 0.97; }
  50% { opacity: 1; }
  100% { opacity: 0.98; }
}
```

## 8. åˆ›ä½œå·¥ä½œæµç¨‹

### 8.1 è§†è§‰å™äº‹çš„è§„åˆ’

1. **æƒ…ç»ªæ¿ï¼ˆMood Boardï¼‰**
   - æ”¶é›†è§†è§‰å‚è€ƒ
   - ç¡®å®šè‰²å½©æ–¹æ¡ˆ
   - å®šä¹‰è§†è§‰é£æ ¼

2. **æ•…äº‹æ¿ï¼ˆStoryboardï¼‰**
   - å…³é”®åœºæ™¯è‰å›¾
   - è½¬åœºè®¾è®¡
   - äº¤äº’ç‚¹æ ‡æ³¨

3. **åŸå‹åˆ¶ä½œ**
   - ä½ä¿çœŸåŸå‹æµ‹è¯•èŠ‚å¥
   - äº¤äº’åŸå‹éªŒè¯æ“ä½œ
   - è§†è§‰åŸå‹ç¡®å®šé£æ ¼

### 8.2 èµ„æºåˆ¶ä½œæµç¨‹

```mermaid
graph TD
    A[æ¦‚å¿µè®¾è®¡] --> B[è‰å›¾ç»˜åˆ¶]
    B --> C[æ•°å­—ç»˜åˆ¶]
    C --> D[åˆ‡ç‰‡å¯¼å‡º]
    D --> E[ä¼˜åŒ–å‹ç¼©]
    E --> F[æ•´åˆæµ‹è¯•]
    F --> G{æ»¡æ„?}
    G -->|å¦| B
    G -->|æ˜¯| H[ç‰ˆæœ¬æ§åˆ¶]
```

### 8.3 å›¢é˜Ÿåä½œæ¨¡å¼

è§†è§‰å™äº‹é€šå¸¸éœ€è¦è·¨å­¦ç§‘åˆä½œï¼š

- **ä½œå®¶**ï¼šæä¾›å™äº‹æ¡†æ¶å’Œæ–‡æœ¬
- **ç¾æœ¯**ï¼šåˆ›ä½œè§†è§‰èµ„æº
- **ç¨‹åº**ï¼šå®ç°äº¤äº’é€»è¾‘
- **éŸ³æ•ˆå¸ˆ**ï¼šåˆ¶ä½œéŸ³é¢‘èµ„æº
- **å¯¼æ¼”**ï¼šç»Ÿä¸€åˆ›ä½œè§†é‡

## 9. æœªæ¥è¶‹åŠ¿

### 9.1 AIè¾…åŠ©çš„è§†è§‰ç”Ÿæˆ

```python
# ä½¿ç”¨AIç”Ÿæˆåœºæ™¯å˜åŒ–
def generate_scene_variation(base_scene, mood, time_of_day):
    prompt = f"Modify {base_scene} to reflect {mood} mood during {time_of_day}"
    variation = ai_model.generate(prompt)
    return apply_style_transfer(variation, project_style)
```

### 9.2 å®æ—¶æ¸²æŸ“å™äº‹

åˆ©ç”¨WebGLå’Œå®æ—¶æ¸²æŸ“åˆ›é€ åŠ¨æ€åœºæ™¯ï¼š

```javascript
// Three.jsåŠ¨æ€å¤©æ°”ç³»ç»Ÿ
class DynamicWeather {
  constructor(scene) {
    this.scene = scene;
    this.particles = new THREE.Points();
  }
  
  setMood(mood) {
    switch(mood) {
      case 'melancholic':
        this.startRain();
        this.dimLights();
        break;
      case 'hopeful':
        this.clearSky();
        this.addSunbeam();
        break;
    }
  }
}
```

### 9.3 å¤šæ¨¡æ€äº¤äº’

ç»“åˆè§†è§‰ã€è§¦è§‰ã€ä½“æ„Ÿçš„å…¨æ–¹ä½å™äº‹ï¼š

- **çœ¼åŠ¨è¿½è¸ª**ï¼šæ ¹æ®æ³¨è§†ç‚¹å±•å¼€å™äº‹
- **æ‰‹åŠ¿è¯†åˆ«**ï¼šæ‰‹åŠ¿æ§åˆ¶è§†è§‰å…ƒç´ 
- **æƒ…ç»ªè¯†åˆ«**ï¼šæ ¹æ®ç”¨æˆ·è¡¨æƒ…è°ƒæ•´æ°›å›´

## ğŸ‹ï¸ ç»ƒä¹ é¢˜

### ç»ƒä¹  4.1ï¼šè§†è§‰èŠ‚å¥è®¾è®¡ [åŸºç¡€]

ä¸ºä¸€ä¸ª"å‘Šç™½åœºæ™¯"è®¾è®¡è§†è§‰èŠ‚å¥ã€‚åœºæ™¯åŒ…å«ï¼š
- ä¸¤ä¸ªè§’è‰²ï¼ˆAå‘Bå‘Šç™½ï¼‰
- æ•™å®¤èƒŒæ™¯
- éœ€è¦ä½“ç°ç´§å¼ â†’æœŸå¾…â†’ç»“æœçš„æƒ…ç»ªå˜åŒ–

è¦æ±‚ï¼š
1. åˆ—å‡ºè‡³å°‘5ä¸ªè§†è§‰èŠ‚å¥ç‚¹
2. è¯´æ˜æ¯ä¸ªèŠ‚å¥ç‚¹çš„è§†è§‰æ•ˆæœ
3. æ ‡æ³¨æ—¶é—´é—´éš”

**Hint**: è€ƒè™‘ä½¿ç”¨ç«‹ç»˜ä½ç½®å˜åŒ–ã€è¡¨æƒ…åˆ‡æ¢ã€èƒŒæ™¯å…‰çº¿å˜åŒ–ã€é•œå¤´ç„¦è·ç­‰æ‰‹æ³•ã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**è§†è§‰èŠ‚å¥è®¾è®¡æ–¹æ¡ˆï¼š**

1. **å¼€åœºï¼ˆ0-2ç§’ï¼‰**
   - èƒŒæ™¯ï¼šæ•™å®¤å…¨æ™¯ï¼Œå¤•é˜³æ–œç…§
   - Aç«™åœ¨å·¦ä¾§ï¼ŒBç«™åœ¨å³ä¾§
   - ä¸¤äººè·ç¦»è¾ƒè¿œï¼Œè¥é€ è·ç¦»æ„Ÿ

2. **ç´§å¼ å»ºç«‹ï¼ˆ2-4ç§’ï¼‰**
   - Açš„ç«‹ç»˜å¾®å¾®é¢¤æŠ–ï¼ˆCSS animationï¼‰
   - èƒŒæ™¯é€æ¸è™šåŒ–ï¼ˆbluræ•ˆæœï¼‰
   - ç¯å¢ƒéŸ³æ¸å¼±ï¼Œå¿ƒè·³å£°æ¸å¼º

3. **å‘Šç™½ç¬é—´ï¼ˆ4-5ç§’ï¼‰**
   - Aå‘å‰ä¸€æ­¥ï¼ˆä½ç½®ä»25%ç§»åˆ°35%ï¼‰
   - åˆ‡æ¢åˆ°ç´§å¼ è¡¨æƒ…
   - ç”»é¢è½»å¾®æ™ƒåŠ¨è¡¨ç°å†…å¿ƒæ³¢åŠ¨

4. **ç­‰å¾…ååº”ï¼ˆ5-7ç§’ï¼‰**
   - æ—¶é—´ä¼¼ä¹é™æ­¢
   - æ·»åŠ æ…¢åŠ¨ä½œç²’å­æ•ˆæœ
   - Bçš„è¡¨æƒ…ä»æƒŠè®¶é€æ¸è½¬å˜

5. **æƒ…ç»ªçˆ†å‘ï¼ˆ7-8ç§’ï¼‰**
   - æ ¹æ®ç»“æœåˆ‡æ¢ï¼š
     - æ¥å—ï¼šç”»é¢å˜äº®ï¼Œæ¨±èŠ±é£˜è½
     - æ‹’ç»ï¼šç”»é¢å˜æš—ï¼Œä¸‹é›¨æ•ˆæœ
   - é•œå¤´æ‹‰è¿‘åˆ°ä¸¤äººç‰¹å†™

å…³é”®æŠ€å·§ï¼šé€šè¿‡è§†è§‰å…ƒç´ çš„æ¸å˜è€Œéçªå˜æ¥å¼•å¯¼æƒ…ç»ªï¼Œè®©è§‚ä¼—æœ‰æ—¶é—´æ¶ˆåŒ–æ¯ä¸ªæƒ…ç»ªè½¬æŠ˜ã€‚
</details>

### ç»ƒä¹  4.2ï¼šæ»šåŠ¨å™äº‹åŸå‹ [åŸºç¡€]

è®¾è®¡ä¸€ä¸ª"ä¸‹å "ä¸»é¢˜çš„æ»šåŠ¨å™äº‹åŸå‹ã€‚è¦æ±‚ï¼š
1. åˆ©ç”¨æ»šåŠ¨æ–¹å‘ä¸ä¸‹å çš„éšå–»å…³ç³»
2. è‡³å°‘åŒ…å«3ä¸ªè§†å·®å±‚
3. è®¾è®¡2ä¸ªæ»šåŠ¨è§¦å‘äº‹ä»¶

**Hint**: æ€è€ƒå¦‚ä½•è®©æ»šåŠ¨é€Ÿåº¦å½±å“ä¸‹å æ„Ÿï¼Œå¦‚ä½•ç”¨è§†å·®è¡¨ç°æ·±åº¦ã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**"ä¸‹å "æ»šåŠ¨å™äº‹è®¾è®¡ï¼š**

**HTMLç»“æ„ï¼š**
```html
<div class="fall-container">
  <div class="layer sky" data-speed="0.2">
    <div class="clouds"></div>
  </div>
  <div class="layer buildings" data-speed="0.5">
    <img src="buildings.png" />
  </div>
  <div class="layer character" data-speed="1">
    <div class="falling-person"></div>
  </div>
  <div class="layer ground" data-speed="1.5">
    <div class="ground-approaching"></div>
  </div>
</div>
```

**è§†å·®æ•ˆæœï¼š**
- å¤©ç©ºå±‚ï¼šæœ€æ…¢ï¼ˆ0.2xï¼‰ï¼Œè¥é€ é«˜åº¦æ„Ÿ
- å»ºç­‘å±‚ï¼šä¸­é€Ÿï¼ˆ0.5xï¼‰ï¼Œå‚è€ƒç‰©
- è§’è‰²å±‚ï¼šæ­£å¸¸é€Ÿåº¦ï¼ˆ1xï¼‰ï¼Œä¸»ä½“
- åœ°é¢å±‚ï¼šæœ€å¿«ï¼ˆ1.5xï¼‰ï¼Œè¥é€ åŠ é€Ÿæ„Ÿ

**æ»šåŠ¨è§¦å‘äº‹ä»¶ï¼š**
1. **ä¸­æ®µè§¦å‘**ï¼ˆscrollY > 50%ï¼‰ï¼š
   - æ·»åŠ é£å£°éŸ³æ•ˆ
   - è§’è‰²æ—‹è½¬åŠ¨ç”»åŠ å¿«
   - ç”»é¢è¾¹ç¼˜æ¨¡ç³ŠåŠ å¼º

2. **æ¥è¿‘åœ°é¢**ï¼ˆscrollY > 80%ï¼‰ï¼š
   - ç”»é¢éœ‡åŠ¨æ•ˆæœ
   - å¿«é€Ÿé—ªå›ç‰‡æ®µ
   - é¢œè‰²é¥±å’Œåº¦é™ä½

**åŠ é€Ÿåº¦æ¨¡æ‹Ÿï¼š**
```javascript
let velocity = 0;
const gravity = 0.98;

function updateFall() {
  velocity += gravity;
  character.style.transform = 
    `translateY(${scrollY * velocity}px) 
     rotate(${scrollY * 0.5}deg)`;
}
```
</details>

### ç»ƒä¹  4.3ï¼šå¤šåª’ä½“æƒ…ç»ªç³»ç»Ÿ [æŒ‘æˆ˜]

è®¾è®¡ä¸€ä¸ªèƒ½å¤Ÿæ ¹æ®æ•…äº‹æƒ…ç»ªè‡ªåŠ¨è°ƒæ•´è§†è§‰å’ŒéŸ³é¢‘çš„ç³»ç»Ÿã€‚ç³»ç»Ÿéœ€è¦ï¼š
1. å®šä¹‰è‡³å°‘4ç§æƒ…ç»ªçŠ¶æ€
2. æ¯ç§æƒ…ç»ªå¯¹åº”çš„è§†è§‰æ•ˆæœ
3. éŸ³é¢‘çš„åŠ¨æ€è°ƒæ•´æ–¹æ¡ˆ
4. æƒ…ç»ªä¹‹é—´çš„å¹³æ»‘è¿‡æ¸¡

**Hint**: è€ƒè™‘ä½¿ç”¨è‰²å½©ç†è®ºã€éŸ³ä¹ç†è®ºä¸­çš„è°ƒå¼ï¼Œä»¥åŠå¦‚ä½•ç”¨ä»£ç å®ç°æ¸å˜ã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**å¤šåª’ä½“æƒ…ç»ªç³»ç»Ÿè®¾è®¡ï¼š**

```javascript
class EmotionSystem {
  constructor() {
    this.emotions = {
      joy: {
        color: { h: 45, s: 80, l: 65 },
        blur: 0,
        particles: 'bubbles',
        music: { 
          layers: ['melody', 'harmony'],
          tempo: 1.2,
          key: 'major'
        }
      },
      sadness: {
        color: { h: 220, s: 30, l: 40 },
        blur: 2,
        particles: 'rain',
        music: {
          layers: ['strings'],
          tempo: 0.8,
          key: 'minor'
        }
      },
      tension: {
        color: { h: 0, s: 50, l: 35 },
        blur: 0,
        particles: 'static',
        music: {
          layers: ['percussion', 'bass'],
          tempo: 1.0,
          key: 'diminished'
        }
      },
      peace: {
        color: { h: 160, s: 40, l: 70 },
        blur: 5,
        particles: 'leaves',
        music: {
          layers: ['ambient'],
          tempo: 0.6,
          key: 'pentatonic'
        }
      }
    };
    
    this.currentEmotion = 'peace';
    this.transitionDuration = 3000;
  }
  
  transitionTo(newEmotion) {
    const start = this.emotions[this.currentEmotion];
    const end = this.emotions[newEmotion];
    
    // è§†è§‰è¿‡æ¸¡
    this.animateColorChange(start.color, end.color);
    this.animateBlur(start.blur, end.blur);
    this.crossfadeParticles(start.particles, end.particles);
    
    // éŸ³é¢‘è¿‡æ¸¡
    this.crossfadeMusicLayers(start.music, end.music);
    this.adjustTempo(start.music.tempo, end.music.tempo);
    
    this.currentEmotion = newEmotion;
  }
  
  animateColorChange(startHSL, endHSL) {
    // ä½¿ç”¨requestAnimationFrameå®ç°å¹³æ»‘è¿‡æ¸¡
    const steps = 60;
    let currentStep = 0;
    
    const animate = () => {
      const progress = currentStep / steps;
      const h = this.lerp(startHSL.h, endHSL.h, progress);
      const s = this.lerp(startHSL.s, endHSL.s, progress);
      const l = this.lerp(startHSL.l, endHSL.l, progress);
      
      document.body.style.backgroundColor = 
        `hsl(${h}, ${s}%, ${l}%)`;
      
      if (currentStep < steps) {
        currentStep++;
        requestAnimationFrame(animate);
      }
    };
    
    animate();
  }
}
```

**å®é™…åº”ç”¨ç¤ºä¾‹ï¼š**
```javascript
// æ•…äº‹èŠ‚ç‚¹è§¦å‘æƒ…ç»ªå˜åŒ–
story.on('chapter:climax', () => {
  emotionSystem.transitionTo('tension');
});

story.on('chapter:resolution', () => {
  emotionSystem.transitionTo('peace');
});

// ç”¨æˆ·é€‰æ‹©å½±å“æƒ…ç»ª
choice.on('select:aggressive', () => {
  emotionSystem.transitionTo('anger');
});
```
</details>

### ç»ƒä¹  4.4ï¼šè§†è§‰å°è¯´æ¼”å‡ºè„šæœ¬ [æŒ‘æˆ˜]

ç¼–å†™ä¸€ä¸ªç®€åŒ–çš„è§†è§‰å°è¯´æ¼”å‡ºè„šæœ¬ç³»ç»Ÿï¼Œæ”¯æŒï¼š
1. è§’è‰²è¿›å‡ºåœº
2. è¡¨æƒ…åˆ‡æ¢
3. èƒŒæ™¯è½¬æ¢
4. ç‰¹æ•ˆè§¦å‘

è¦æ±‚ä½¿ç”¨ç±»ä¼¼èˆå°å‰§æœ¬çš„è¯­æ³•ã€‚

**Hint**: å‚è€ƒç°æœ‰VNå¼•æ“çš„è„šæœ¬è¯­æ³•ï¼Œæ€è€ƒå¦‚ä½•è®¾è®¡æ—¢ç›´è§‚åˆå¼ºå¤§çš„DSLã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**è§†è§‰å°è¯´è„šæœ¬ç³»ç»Ÿè®¾è®¡ï¼š**

**è„šæœ¬è¯­æ³•ç¤ºä¾‹ï¼š**
```
# åœºæ™¯ï¼šå‘Šç™½
@scene confession
@bg rooftop sunset
@bgm romantic_piano

alice: enter left
alice: expression nervous
"æˆ‘...æˆ‘æœ‰è¯æƒ³å¯¹ä½ è¯´"

bob: enter right  
bob: expression surprised
"æ€ä¹ˆäº†ï¼Ÿ"

alice: move center
@effect heartbeat
alice: expression determined
"æˆ‘å–œæ¬¢ä½ ï¼"

@pause 2
@effect flash
@bg rooftop starry_night

bob: expression happy
"å…¶å®...æˆ‘ä¹Ÿæ˜¯"

@effect sakura_petals
alice&bob: move close
@fade out
```

**è§£æå™¨å®ç°ï¼š**
```javascript
class VNScriptParser {
  constructor() {
    this.commands = {
      '@scene': this.setScene,
      '@bg': this.setBackground,
      '@bgm': this.setMusic,
      '@effect': this.playEffect,
      '@pause': this.pause,
      '@fade': this.fade,
      'enter': this.characterEnter,
      'exit': this.characterExit,
      'move': this.characterMove,
      'expression': this.setExpression
    };
  }
  
  parse(script) {
    const lines = script.split('\n');
    const timeline = [];
    
    for (let line of lines) {
      line = line.trim();
      if (!line || line.startsWith('#')) continue;
      
      const parsed = this.parseLine(line);
      if (parsed) timeline.push(parsed);
    }
    
    return timeline;
  }
  
  parseLine(line) {
    // ç³»ç»Ÿå‘½ä»¤
    if (line.startsWith('@')) {
      const [cmd, ...args] = line.split(' ');
      return {
        type: 'system',
        command: cmd,
        args: args
      };
    }
    
    // è§’è‰²åŠ¨ä½œ
    if (line.includes(':')) {
      const [character, action] = line.split(':');
      const [cmd, ...args] = action.trim().split(' ');
      
      // å¤„ç†å¤šè§’è‰²åŒæ—¶åŠ¨ä½œ
      const characters = character.includes('&') 
        ? character.split('&').map(c => c.trim())
        : [character.trim()];
        
      return {
        type: 'character',
        characters: characters,
        command: cmd,
        args: args
      };
    }
    
    // å¯¹è¯
    if (line.startsWith('"')) {
      return {
        type: 'dialogue',
        text: line.slice(1, -1)
      };
    }
  }
  
  async execute(timeline) {
    for (let action of timeline) {
      await this.executeAction(action);
    }
  }
}
```

**é«˜çº§åŠŸèƒ½æ‰©å±•ï¼š**
```javascript
// æ¡ä»¶åˆ†æ”¯
@if love_points > 10
  alice: expression love
  "æˆ‘ç­‰è¿™ä¸€å¤©å¾ˆä¹…äº†..."
@else
  alice: expression sad  
  "æˆ‘...æˆ‘æ˜ç™½äº†"
@endif

// å¹¶è¡Œæ‰§è¡Œ
@parallel
  alice: move left
  bob: move right
  @effect split_screen
@end_parallel

// å¾ªç¯
@repeat 3
  @effect shake
  @pause 0.5
@end_repeat
```
</details>

### ç»ƒä¹  4.5ï¼šå“åº”å¼è§†è§‰å™äº‹é€‚é… [åŸºç¡€]

å°†ä¸€ä¸ªæ¡Œé¢ç«¯çš„è§†è§‰å°è¯´åœºæ™¯é€‚é…åˆ°ç§»åŠ¨ç«¯ã€‚åŸåœºæ™¯åŒ…å«ï¼š
- å·¦ä¸­å³ä¸‰ä¸ªè§’è‰²ä½ç½®
- å¤æ‚çš„è§†å·®èƒŒæ™¯
- é¼ æ ‡æ‚¬åœè§¦å‘çš„ä¿¡æ¯

è¦æ±‚ä¿æŒå™äº‹æ•ˆæœçš„åŒæ—¶ä¼˜åŒ–ç§»åŠ¨ä½“éªŒã€‚

**Hint**: è€ƒè™‘è§¦æ‘¸æ‰‹åŠ¿ã€å±å¹•æ–¹å‘ã€æ€§èƒ½é™åˆ¶ã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆï¼š**

**1. å¸ƒå±€è°ƒæ•´ï¼š**
```css
/* æ¡Œé¢ç«¯ï¼šæ¨ªå‘æ’åˆ— */
@media (min-width: 768px) {
  .character-container {
    display: flex;
    justify-content: space-around;
  }
  .character {
    width: 30%;
  }
}

/* ç§»åŠ¨ç«¯ï¼šç„¦ç‚¹å¼å¸ƒå±€ */
@media (max-width: 767px) {
  .character-container {
    position: relative;
    height: 60vh;
  }
  
  .character {
    position: absolute;
    width: 60%;
    transition: all 0.3s ease;
  }
  
  .character.active {
    z-index: 10;
    left: 20%;
    opacity: 1;
    transform: scale(1);
  }
  
  .character.inactive {
    z-index: 5;
    opacity: 0.6;
    transform: scale(0.8);
  }
  
  .character.inactive.left {
    left: -10%;
  }
  
  .character.inactive.right {
    right: -10%;
  }
}
```

**2. äº¤äº’æ–¹å¼è½¬æ¢ï¼š**
```javascript
// æ¡Œé¢ç«¯ï¼šæ‚¬åœ
if (!isMobile) {
  character.addEventListener('mouseenter', showInfo);
  character.addEventListener('mouseleave', hideInfo);
} else {
  // ç§»åŠ¨ç«¯ï¼šç‚¹å‡»åˆ‡æ¢
  let activeCharacter = null;
  
  character.addEventListener('click', (e) => {
    e.stopPropagation();
    
    if (activeCharacter === character) {
      hideInfo();
      activeCharacter = null;
    } else {
      if (activeCharacter) hideInfo(activeCharacter);
      showInfo(character);
      activeCharacter = character;
    }
  });
  
  // ç‚¹å‡»ç©ºç™½å¤„å–æ¶ˆé€‰ä¸­
  document.addEventListener('click', () => {
    if (activeCharacter) {
      hideInfo(activeCharacter);
      activeCharacter = null;
    }
  });
}
```

**3. æ€§èƒ½ä¼˜åŒ–ï¼š**
```javascript
// ç§»åŠ¨ç«¯ç®€åŒ–è§†å·®
if (isMobile) {
  // å‡å°‘è§†å·®å±‚æ•°
  document.querySelectorAll('.parallax-layer').forEach((layer, i) => {
    if (i > 2) layer.remove(); // åªä¿ç•™3å±‚
  });
  
  // ä½¿ç”¨èŠ‚æµä¼˜åŒ–æ»šåŠ¨
  let ticking = false;
  function updateParallax() {
    if (!ticking) {
      requestAnimationFrame(() => {
        // ç®€åŒ–çš„è§†å·®è®¡ç®—
        const scrolled = window.pageYOffset;
        bgLayer.style.transform = `translateY(${scrolled * 0.5}px)`;
        ticking = false;
      });
      ticking = true;
    }
  }
  
  window.addEventListener('scroll', updateParallax, { passive: true });
}
```

**4. æ‰‹åŠ¿æ”¯æŒï¼š**
```javascript
// æ»‘åŠ¨åˆ‡æ¢è§’è‰²ç„¦ç‚¹
let touchStartX = 0;
const threshold = 50;

container.addEventListener('touchstart', (e) => {
  touchStartX = e.touches[0].clientX;
});

container.addEventListener('touchend', (e) => {
  const touchEndX = e.changedTouches[0].clientX;
  const diff = touchStartX - touchEndX;
  
  if (Math.abs(diff) > threshold) {
    if (diff > 0) {
      focusNextCharacter();
    } else {
      focusPreviousCharacter();
    }
  }
});
```
</details>

### ç»ƒä¹  4.6ï¼šç”Ÿæˆå¼è§†è§‰å…ƒç´  [æŒ‘æˆ˜]

åˆ›å»ºä¸€ä¸ªæ ¹æ®æ–‡æœ¬æƒ…æ„Ÿç”ŸæˆæŠ½è±¡è§†è§‰èƒŒæ™¯çš„ç³»ç»Ÿã€‚è¦æ±‚ï¼š
1. åˆ†ææ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘
2. ç”Ÿæˆå¯¹åº”çš„é¢œè‰²ã€å½¢çŠ¶ã€åŠ¨æ€
3. æ”¯æŒæƒ…æ„Ÿæ··åˆ

**Hint**: å¯ä»¥ä½¿ç”¨Canvas APIæˆ–SVGï¼Œè€ƒè™‘å¦‚ä½•å°†æƒ…æ„Ÿé‡åŒ–ä¸ºè§†è§‰å‚æ•°ã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**ç”Ÿæˆå¼æƒ…æ„Ÿè§†è§‰ç³»ç»Ÿï¼š**

```javascript
class EmotionVisualGenerator {
  constructor(canvas) {
    this.ctx = canvas.getContext('2d');
    this.width = canvas.width;
    this.height = canvas.height;
    
    // æƒ…æ„Ÿ-è§†è§‰æ˜ å°„
    this.emotionMappings = {
      joy: {
        colors: ['#FFD700', '#FFA500', '#FF69B4'],
        shapes: 'circles',
        movement: 'bounce',
        density: 0.8
      },
      sadness: {
        colors: ['#4169E1', '#000080', '#483D8B'],
        shapes: 'teardrops',
        movement: 'fall',
        density: 0.4
      },
      anger: {
        colors: ['#DC143C', '#8B0000', '#FF4500'],
        shapes: 'spikes',
        movement: 'shake',
        density: 0.9
      },
      fear: {
        colors: ['#2F4F4F', '#000000', '#696969'],
        shapes: 'fragments',
        movement: 'flee',
        density: 0.6
      },
      love: {
        colors: ['#FF1493', '#FF69B4', '#FFC0CB'],
        shapes: 'hearts',
        movement: 'float',
        density: 0.7
      }
    };
    
    this.particles = [];
  }
  
  analyzeText(text) {
    // ç®€åŒ–çš„æƒ…æ„Ÿåˆ†æ
    const emotions = {
      joy: 0,
      sadness: 0,
      anger: 0,
      fear: 0,
      love: 0
    };
    
    // å…³é”®è¯åŒ¹é…ï¼ˆå®é™…åº”ç”¨ä¸­ä½¿ç”¨NLPåº“ï¼‰
    const keywords = {
      joy: ['happy', 'å¼€å¿ƒ', 'joy', 'å¿«ä¹', 'laugh', 'ç¬‘'],
      sadness: ['sad', 'æ‚²ä¼¤', 'cry', 'å“­', 'tear', 'æ³ª'],
      anger: ['angry', 'ç”Ÿæ°”', 'rage', 'æ„¤æ€’', 'hate', 'æ¨'],
      fear: ['afraid', 'å®³æ€•', 'scared', 'ææƒ§', 'worry', 'æ‹…å¿ƒ'],
      love: ['love', 'çˆ±', 'heart', 'å¿ƒ', 'dear', 'äº²çˆ±']
    };
    
    // è®¡ç®—å„æƒ…æ„Ÿæƒé‡
    for (let [emotion, words] of Object.entries(keywords)) {
      for (let word of words) {
        if (text.includes(word)) {
          emotions[emotion] += 1;
        }
      }
    }
    
    // å½’ä¸€åŒ–
    const total = Object.values(emotions).reduce((a, b) => a + b, 0);
    if (total > 0) {
      for (let emotion in emotions) {
        emotions[emotion] /= total;
      }
    }
    
    return emotions;
  }
  
  generate(text) {
    const emotions = this.analyzeText(text);
    this.particles = [];
    
    // æ ¹æ®æƒ…æ„Ÿæƒé‡æ··åˆç”Ÿæˆç²’å­
    for (let [emotion, weight] of Object.entries(emotions)) {
      if (weight > 0) {
        this.generateParticles(emotion, weight);
      }
    }
    
    this.animate();
  }
  
  generateParticles(emotion, weight) {
    const config = this.emotionMappings[emotion];
    const count = Math.floor(100 * weight * config.density);
    
    for (let i = 0; i < count; i++) {
      this.particles.push({
        x: Math.random() * this.width,
        y: Math.random() * this.height,
        vx: 0,
        vy: 0,
        color: config.colors[Math.floor(Math.random() * config.colors.length)],
        shape: config.shapes,
        movement: config.movement,
        size: Math.random() * 20 + 10,
        life: 1,
        emotion: emotion
      });
    }
  }
  
  updateParticle(particle) {
    // æ ¹æ®è¿åŠ¨ç±»å‹æ›´æ–°ä½ç½®
    switch (particle.movement) {
      case 'bounce':
        particle.vy += 0.5;
        if (particle.y > this.height - particle.size) {
          particle.vy *= -0.8;
          particle.y = this.height - particle.size;
        }
        break;
        
      case 'fall':
        particle.vy += 0.2;
        if (particle.y > this.height) {
          particle.y = -particle.size;
        }
        break;
        
      case 'shake':
        particle.x += (Math.random() - 0.5) * 5;
        particle.y += (Math.random() - 0.5) * 5;
        break;
        
      case 'flee':
        const centerX = this.width / 2;
        const centerY = this.height / 2;
        const dx = particle.x - centerX;
        const dy = particle.y - centerY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        particle.vx = (dx / distance) * 2;
        particle.vy = (dy / distance) * 2;
        break;
        
      case 'float':
        particle.y -= 1;
        particle.x += Math.sin(particle.y * 0.01) * 2;
        if (particle.y < -particle.size) {
          particle.y = this.height + particle.size;
        }
        break;
    }
    
    particle.x += particle.vx;
    particle.y += particle.vy;
    particle.life -= 0.01;
  }
  
  drawParticle(particle) {
    this.ctx.save();
    this.ctx.globalAlpha = particle.life;
    this.ctx.fillStyle = particle.color;
    
    switch (particle.shape) {
      case 'circles':
        this.ctx.beginPath();
        this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
        this.ctx.fill();
        break;
        
      case 'hearts':
        this.drawHeart(particle.x, particle.y, particle.size);
        break;
        
      case 'teardrops':
        this.drawTeardrop(particle.x, particle.y, particle.size);
        break;
        
      case 'spikes':
        this.drawSpike(particle.x, particle.y, particle.size);
        break;
        
      case 'fragments':
        this.drawFragment(particle.x, particle.y, particle.size);
        break;
    }
    
    this.ctx.restore();
  }
  
  animate() {
    this.ctx.clearRect(0, 0, this.width, this.height);
    
    // æ›´æ–°å’Œç»˜åˆ¶æ‰€æœ‰ç²’å­
    this.particles = this.particles.filter(particle => {
      this.updateParticle(particle);
      this.drawParticle(particle);
      return particle.life > 0;
    });
    
    if (this.particles.length > 0) {
      requestAnimationFrame(() => this.animate());
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const canvas = document.getElementById('emotion-canvas');
const generator = new EmotionVisualGenerator(canvas);

// æ–‡æœ¬å˜åŒ–æ—¶ç”Ÿæˆæ–°çš„è§†è§‰
textInput.addEventListener('input', (e) => {
  generator.generate(e.target.value);
});
```
</details>

### ç»ƒä¹  4.7ï¼šéŸ³ç”»åŒæ­¥ç³»ç»Ÿ [æŒ‘æˆ˜]

è®¾è®¡ä¸€ä¸ªèƒ½å¤Ÿè®©è§†è§‰æ•ˆæœä¸éŸ³ä¹èŠ‚å¥åŒæ­¥çš„ç³»ç»Ÿã€‚è¦æ±‚ï¼š
1. å®æ—¶åˆ†æéŸ³é¢‘é¢‘è°±
2. å°†é¢‘è°±æ•°æ®æ˜ å°„åˆ°è§†è§‰å‚æ•°
3. åˆ›é€ è‡³å°‘3ç§ä¸åŒçš„è§†è§‰åŒ–æ¨¡å¼

**Hint**: ä½¿ç”¨Web Audio APIè·å–é¢‘è°±æ•°æ®ï¼Œè€ƒè™‘å¦‚ä½•è®©è§†è§‰å˜åŒ–æ„Ÿè§‰"éŸ³ä¹æ€§"ã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**éŸ³ç”»åŒæ­¥ç³»ç»Ÿå®ç°ï¼š**

```javascript
class AudioVisualSync {
  constructor(audioElement, canvas) {
    this.audio = audioElement;
    this.canvas = canvas;
    this.ctx = canvas.getContext('2d');
    
    // éŸ³é¢‘åˆ†æè®¾ç½®
    this.audioContext = new AudioContext();
    this.analyser = this.audioContext.createAnalyser();
    this.analyser.fftSize = 256;
    
    // è¿æ¥éŸ³é¢‘æº
    const source = this.audioContext.createMediaElementSource(this.audio);
    source.connect(this.analyser);
    this.analyser.connect(this.audioContext.destination);
    
    // é¢‘è°±æ•°æ®
    this.bufferLength = this.analyser.frequencyBinCount;
    this.dataArray = new Uint8Array(this.bufferLength);
    
    // è§†è§‰åŒ–æ¨¡å¼
    this.modes = {
      'bars': this.drawBars.bind(this),
      'circles': this.drawCircles.bind(this),
      'particles': this.drawParticles.bind(this)
    };
    this.currentMode = 'bars';
    
    // ç²’å­ç³»ç»Ÿï¼ˆç”¨äºparticlesæ¨¡å¼ï¼‰
    this.particles = [];
    this.initParticles();
  }
  
  start() {
    this.animate();
  }
  
  animate() {
    requestAnimationFrame(() => this.animate());
    
    // è·å–é¢‘è°±æ•°æ®
    this.analyser.getByteFrequencyData(this.dataArray);
    
    // æ¸…ç©ºç”»å¸ƒ
    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
    
    // ç»˜åˆ¶å½“å‰æ¨¡å¼
    this.modes[this.currentMode]();
  }
  
  // æ¨¡å¼1ï¼šé¢‘è°±æŸ±çŠ¶å›¾
  drawBars() {
    const barWidth = (this.canvas.width / this.bufferLength) * 2.5;
    let x = 0;
    
    for (let i = 0; i < this.bufferLength; i++) {
      const barHeight = this.dataArray[i] * 2;
      
      // æ ¹æ®é¢‘ç‡èŒƒå›´è®¾ç½®é¢œè‰²
      const hue = (i / this.bufferLength) * 360;
      const lightness = 50 + (this.dataArray[i] / 255) * 50;
      this.ctx.fillStyle = `hsl(${hue}, 100%, ${lightness}%)`;
      
      // ç»˜åˆ¶æŸ±å­
      this.ctx.fillRect(
        x, 
        this.canvas.height - barHeight, 
        barWidth, 
        barHeight
      );
      
      // æ·»åŠ é•œåƒæ•ˆæœ
      this.ctx.globalAlpha = 0.3;
      this.ctx.fillRect(
        x, 
        0, 
        barWidth, 
        barHeight * 0.5
      );
      this.ctx.globalAlpha = 1;
      
      x += barWidth + 1;
    }
  }
  
  // æ¨¡å¼2ï¼šåœ†å½¢æ³¢å½¢
  drawCircles() {
    const centerX = this.canvas.width / 2;
    const centerY = this.canvas.height / 2;
    
    // è®¡ç®—å¹³å‡éŸ³é‡
    let average = 0;
    for (let i = 0; i < this.bufferLength; i++) {
      average += this.dataArray[i];
    }
    average /= this.bufferLength;
    
    // ç»˜åˆ¶å¤šä¸ªåŒå¿ƒåœ†
    for (let ring = 0; ring < 5; ring++) {
      this.ctx.beginPath();
      
      for (let i = 0; i < this.bufferLength; i++) {
        const angle = (i / this.bufferLength) * Math.PI * 2;
        const amplitude = this.dataArray[i] / 255;
        const radius = 50 + ring * 30 + amplitude * 50;
        
        const x = centerX + Math.cos(angle) * radius;
        const y = centerY + Math.sin(angle) * radius;
        
        if (i === 0) {
          this.ctx.moveTo(x, y);
        } else {
          this.ctx.lineTo(x, y);
        }
      }
      
      this.ctx.closePath();
      
      // æ¸å˜æè¾¹
      const gradient = this.ctx.createRadialGradient(
        centerX, centerY, 0,
        centerX, centerY, 200
      );
      gradient.addColorStop(0, `hsla(${average}, 100%, 50%, 0.8)`);
      gradient.addColorStop(1, `hsla(${average + 60}, 100%, 50%, 0.2)`);
      
      this.ctx.strokeStyle = gradient;
      this.ctx.lineWidth = 2;
      this.ctx.stroke();
    }
  }
  
  // æ¨¡å¼3ï¼šååº”å¼ç²’å­
  initParticles() {
    for (let i = 0; i < 200; i++) {
      this.particles.push({
        x: Math.random() * this.canvas.width,
        y: Math.random() * this.canvas.height,
        vx: 0,
        vy: 0,
        size: Math.random() * 3 + 1,
        frequencyBin: Math.floor(Math.random() * this.bufferLength)
      });
    }
  }
  
  drawParticles() {
    // è®¡ç®—ä½ä¸­é«˜é¢‘èƒ½é‡
    const bassEnergy = this.getFrequencyEnergy(0, 10);
    const midEnergy = this.getFrequencyEnergy(10, 50);
    const trebleEnergy = this.getFrequencyEnergy(50, this.bufferLength);
    
    this.particles.forEach(particle => {
      // æ ¹æ®å¯¹åº”é¢‘æ®µæ›´æ–°ç²’å­
      const energy = this.dataArray[particle.frequencyBin] / 255;
      
      // ç²’å­è¿åŠ¨
      particle.vx += (Math.random() - 0.5) * energy * 5;
      particle.vy += (Math.random() - 0.5) * energy * 5;
      
      // é˜»å°¼
      particle.vx *= 0.95;
      particle.vy *= 0.95;
      
      // æ›´æ–°ä½ç½®
      particle.x += particle.vx;
      particle.y += particle.vy;
      
      // è¾¹ç•Œå¤„ç†
      if (particle.x < 0) particle.x = this.canvas.width;
      if (particle.x > this.canvas.width) particle.x = 0;
      if (particle.y < 0) particle.y = this.canvas.height;
      if (particle.y > this.canvas.height) particle.y = 0;
      
      // ç»˜åˆ¶ç²’å­
      const size = particle.size + energy * 10;
      const hue = (particle.frequencyBin / this.bufferLength) * 360;
      
      this.ctx.beginPath();
      this.ctx.arc(particle.x, particle.y, size, 0, Math.PI * 2);
      this.ctx.fillStyle = `hsla(${hue}, 100%, ${50 + energy * 50}%, ${0.5 + energy * 0.5})`;
      this.ctx.fill();
      
      // è¿çº¿æ•ˆæœ
      this.particles.forEach(other => {
        const distance = Math.hypot(
          particle.x - other.x, 
          particle.y - other.y
        );
        
        if (distance < 100 && distance > 0) {
          this.ctx.beginPath();
          this.ctx.moveTo(particle.x, particle.y);
          this.ctx.lineTo(other.x, other.y);
          this.ctx.strokeStyle = `rgba(255, 255, 255, ${0.1 * (1 - distance / 100)})`;
          this.ctx.stroke();
        }
      });
    });
  }
  
  getFrequencyEnergy(startBin, endBin) {
    let sum = 0;
    for (let i = startBin; i < endBin && i < this.bufferLength; i++) {
      sum += this.dataArray[i];
    }
    return sum / (endBin - startBin) / 255;
  }
  
  setMode(mode) {
    if (this.modes[mode]) {
      this.currentMode = mode;
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const audio = document.getElementById('bgm');
const canvas = document.getElementById('visualizer');
const visualizer = new AudioVisualSync(audio, canvas);

audio.addEventListener('play', () => {
  visualizer.audioContext.resume();
  visualizer.start();
});

// åˆ‡æ¢æ¨¡å¼
document.querySelectorAll('.mode-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    visualizer.setMode(btn.dataset.mode);
  });
});
```
</details>

### ç»ƒä¹  4.8ï¼šè·¨åª’ä½“å™äº‹æ•´åˆ [æŒ‘æˆ˜]

è®¾è®¡ä¸€ä¸ªæ•´åˆæ–‡å­—ã€å›¾åƒã€å£°éŸ³ã€è§†é¢‘çš„å™äº‹ç‰‡æ®µã€‚ä¸»é¢˜ï¼š"è®°å¿†çš„æ¶ˆé€"ã€‚è¦æ±‚ï¼š
1. å„åª’ä½“å…ƒç´ è¦æœ‰æœºç»“åˆï¼Œä¸æ˜¯ç®€å•å †ç Œ
2. åˆ©ç”¨åª’ä½“ç‰¹æ€§å¼ºåŒ–ä¸»é¢˜
3. è®¾è®¡è‡³å°‘ä¸€ä¸ªåˆ›æ–°çš„è·¨åª’ä½“äº¤äº’

**Hint**: æ€è€ƒå¦‚ä½•ç”¨æŠ€æœ¯æ‰‹æ®µè¡¨ç°"æ¶ˆé€"ï¼Œå¦‚ä½•è®©ä¸åŒåª’ä½“äº’ç›¸å‘¼åº”ã€‚

<details>
<summary>å‚è€ƒç­”æ¡ˆ</summary>

**"è®°å¿†çš„æ¶ˆé€"è·¨åª’ä½“å™äº‹è®¾è®¡ï¼š**

**æ¦‚å¿µè®¾è®¡ï¼š**
é€šè¿‡æŠ€æœ¯æ‰‹æ®µæ¨¡æ‹Ÿè®°å¿†é€æ¸æ¨¡ç³Šã€ç‰‡æ®µåŒ–ã€æœ€ç»ˆæ¶ˆå¤±çš„è¿‡ç¨‹ã€‚

**HTMLç»“æ„ï¼š**
```html
<div class="memory-container">
  <div class="memory-layer text-layer">
    <p class="memory-text">é‚£æ˜¯ä¸€ä¸ªå¤å¤©çš„åˆå...</p>
  </div>
  
  <div class="memory-layer photo-layer">
    <img class="memory-photo" src="summer-photo.jpg" />
    <canvas class="erosion-canvas"></canvas>
  </div>
  
  <div class="memory-layer video-layer">
    <video class="memory-video" src="memory-clip.mp4"></video>
  </div>
  
  <div class="memory-layer audio-layer">
    <audio class="memory-audio" src="voice-memo.mp3"></audio>
    <div class="waveform"></div>
  </div>
  
  <div class="interaction-prompt">
    <p>è¯•å›¾æŠ“ä½è®°å¿†...</p>
  </div>
</div>
```

**æ ¸å¿ƒå®ç°ï¼š**
```javascript
class MemoryFade {
  constructor(container) {
    this.container = container;
    this.degradationLevel = 0;
    this.memories = {
      text: container.querySelector('.memory-text'),
      photo: container.querySelector('.memory-photo'),
      video: container.querySelector('.memory-video'),
      audio: container.querySelector('.memory-audio')
    };
    
    this.initInteractions();
    this.startDegradation();
  }
  
  // æ–‡å­—é€æ¸æ¶ˆå¤±
  degradeText() {
    const text = this.memories.text.textContent;
    const words = text.split(' ');
    
    // éšæœºåˆ é™¤å•è¯
    const removeCount = Math.floor(this.degradationLevel * words.length);
    for (let i = 0; i < removeCount; i++) {
      const index = Math.floor(Math.random() * words.length);
      words[index] = '<span class="faded-word">...</span>';
    }
    
    this.memories.text.innerHTML = words.join(' ');
    
    // æ·»åŠ æ¨¡ç³Šæ•ˆæœ
    this.memories.text.style.filter = 
      `blur(${this.degradationLevel * 5}px)`;
  }
  
  // å›¾ç‰‡åƒç´ åŒ–æ¶ˆå¤±
  degradePhoto() {
    const canvas = this.container.querySelector('.erosion-canvas');
    const ctx = canvas.getContext('2d');
    const img = this.memories.photo;
    
    canvas.width = img.width;
    canvas.height = img.height;
    
    // ç»˜åˆ¶åŸå›¾
    ctx.drawImage(img, 0, 0);
    
    // è·å–åƒç´ æ•°æ®
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    const data = imageData.data;
    
    // éšæœº"è…èš€"åƒç´ 
    const erosionRate = this.degradationLevel;
    for (let i = 0; i < data.length; i += 4) {
      if (Math.random() < erosionRate) {
        // é€æ¸å˜ç™½ï¼ˆæ¶ˆå¤±ï¼‰
        data[i] = 255;     // R
        data[i + 1] = 255; // G
        data[i + 2] = 255; // B
        data[i + 3] = 255 - Math.floor(this.degradationLevel * 255); // A
      }
    }
    
    ctx.putImageData(imageData, 0, 0);
    
    // éšè—åŸå›¾ï¼Œæ˜¾ç¤ºç”»å¸ƒ
    img.style.display = 'none';
    canvas.style.display = 'block';
  }
  
  // è§†é¢‘å¸§ä¸¢å¤±
  degradeVideo() {
    const video = this.memories.video;
    
    // éšæœºè·³å¸§
    video.addEventListener('timeupdate', () => {
      if (Math.random() < this.degradationLevel * 0.3) {
        video.currentTime += Math.random() * 2; // è·³è¿‡ä¸€äº›å¸§
      }
    });
    
    // é™ä½é€æ˜åº¦
    video.style.opacity = 1 - this.degradationLevel * 0.7;
    
    // æ·»åŠ å™ªç‚¹
    video.style.filter = 
      `contrast(${1 - this.degradationLevel * 0.5}) 
       grayscale(${this.degradationLevel * 100}%)`;
  }
  
  // éŸ³é¢‘é€æ¸å¤±çœŸ
  degradeAudio() {
    const audio = this.memories.audio;
    const audioContext = new AudioContext();
    const source = audioContext.createMediaElementSource(audio);
    
    // åˆ›å»ºæ»¤æ³¢å™¨
    const filter = audioContext.createBiquadFilter();
    filter.type = 'lowpass';
    filter.frequency.value = 20000 * (1 - this.degradationLevel);
    
    // åˆ›å»ºå¤±çœŸæ•ˆæœ
    const distortion = audioContext.createWaveShaper();
    distortion.curve = this.makeDistortionCurve(
      this.degradationLevel * 100
    );
    
    // è¿æ¥éŸ³é¢‘èŠ‚ç‚¹
    source.connect(filter);
    filter.connect(distortion);
    distortion.connect(audioContext.destination);
    
    // éŸ³é‡æ¸å¼±
    audio.volume = 1 - this.degradationLevel * 0.8;
  }
  
  // åˆ›æ–°äº¤äº’ï¼šé¼ æ ‡ç§»åŠ¨æš‚æ—¶æ¢å¤è®°å¿†
  initInteractions() {
    let lastMouseX = 0;
    let lastMouseY = 0;
    let mouseVelocity = 0;
    
    this.container.addEventListener('mousemove', (e) => {
      // è®¡ç®—é¼ æ ‡é€Ÿåº¦
      const deltaX = e.clientX - lastMouseX;
      const deltaY = e.clientY - lastMouseY;
      mouseVelocity = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
      
      lastMouseX = e.clientX;
      lastMouseY = e.clientY;
      
      // å¿«é€Ÿç§»åŠ¨æ—¶æš‚æ—¶æ¢å¤è®°å¿†
      if (mouseVelocity > 10) {
        this.temporaryRestore(e.clientX, e.clientY);
      }
    });
    
    // è§¦æ‘¸äº¤äº’
    this.container.addEventListener('touchmove', (e) => {
      const touch = e.touches[0];
      this.temporaryRestore(touch.clientX, touch.clientY);
    });
  }
  
  temporaryRestore(x, y) {
    // åˆ›å»ºæ¶Ÿæ¼ªæ•ˆæœ
    const ripple = document.createElement('div');
    ripple.className = 'memory-ripple';
    ripple.style.left = x + 'px';
    ripple.style.top = y + 'px';
    this.container.appendChild(ripple);
    
    // å±€éƒ¨æ¢å¤æ¸…æ™°åº¦
    const radius = 150;
    const elements = this.container.querySelectorAll('.memory-layer > *');
    
    elements.forEach(el => {
      const rect = el.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      const distance = Math.hypot(x - centerX, y - centerY);
      
      if (distance < radius) {
        const clarity = 1 - (distance / radius);
        el.style.filter = `blur(${(1 - clarity) * this.degradationLevel * 5}px)`;
        el.style.opacity = 0.3 + clarity * 0.7;
      }
    });
    
    // æ¶Ÿæ¼ªåŠ¨ç”»åç§»é™¤
    setTimeout(() => ripple.remove(), 1000);
  }
  
  // è‡ªåŠ¨é€€åŒ–è¿‡ç¨‹
  startDegradation() {
    setInterval(() => {
      this.degradationLevel = Math.min(
        this.degradationLevel + 0.01, 
        1
      );
      
      this.degradeText();
      this.degradePhoto();
      this.degradeVideo();
      this.degradeAudio();
      
      // å®Œå…¨æ¶ˆå¤±æ—¶çš„å¤„ç†
      if (this.degradationLevel >= 1) {
        this.onMemoryLost();
      }
    }, 1000);
  }
  
  onMemoryLost() {
    // æ‰€æœ‰å†…å®¹æ·¡å‡º
    this.container.style.transition = 'opacity 3s';
    this.container.style.opacity = '0';
    
    // æ˜¾ç¤ºç»ˆç« æ–‡å­—
    setTimeout(() => {
      this.container.innerHTML = `
        <div class="epilogue">
          <p>è®°å¿†å¦‚æ²™ï¼Œç»ˆå°†éšé£è€Œé€...</p>
          <button onclick="location.reload()">é‡æ¸©</button>
        </div>
      `;
      this.container.style.opacity = '1';
    }, 3000);
  }
}

// CSSå…³é”®æ ·å¼
```css
.memory-container {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden;
  background: linear-gradient(to bottom, #f0f0f0, #d0d0d0);
}

.memory-layer {
  position: absolute;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.faded-word {
  color: #ccc;
  font-style: italic;
}

.memory-ripple {
  position: absolute;
  width: 300px;
  height: 300px;
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(255, 255, 255, 0.8) 0%,
    transparent 70%
  );
  transform: translate(-50%, -50%);
  animation: ripple 1s ease-out;
  pointer-events: none;
}

@keyframes ripple {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0;
  }
}

.epilogue {
  text-align: center;
  color: #666;
  font-size: 24px;
  animation: fadeIn 3s;
}
```

// å¯åŠ¨
const memoryExperience = new MemoryFade(
  document.querySelector('.memory-container')
);
```

**è®¾è®¡äº®ç‚¹ï¼š**
1. **åª’ä½“é€€åŒ–**ï¼šæ¯ç§åª’ä½“ç”¨ç¬¦åˆå…¶ç‰¹æ€§çš„æ–¹å¼"æ¶ˆå¤±"
2. **äº¤äº’æ¢å¤**ï¼šé¼ æ ‡/è§¦æ‘¸å¯æš‚æ—¶"å”¤é†’"å±€éƒ¨è®°å¿†
3. **æƒ…æ„Ÿé€’è¿›**ï¼šä»æ¸…æ™°åˆ°æ¨¡ç³Šåˆ°æ¶ˆå¤±çš„è¿‡ç¨‹è¥é€ æƒ…æ„Ÿ
4. **æŠ€æœ¯è¯—æ„**ï¼šç”¨ä»£ç å®ç°"è®°å¿†æ¶ˆé€"çš„è¯—æ„è¡¨è¾¾
</details>
```